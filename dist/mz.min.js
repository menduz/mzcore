if("undefined"==typeof this.jQuery)throw new Error("jQuery not present");function isDef(e){return"undefined"!=typeof e}"Promise"in window||eval('!function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void j(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j="function"==typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},k=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype["catch"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&k(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){j=a},"undefined"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);');var mz;!function(e){e.globalContext=window||"undefined"!=typeof global&&global,function(){var t=1;e.globalContext.Symbol=e.globalContext.Symbol||function(e){return"[["+e+"-"+t++ +"]]"}}(),e._debug=window._debug||null!==window.location.search.match("(\\?|&)mz-debug");var t,n,r,o,i,a=document.getElementsByTagName("script"),s=!0;for(n=0,r=a.length;r>n;n++)if(o=a[n].src,i=o.match(/mz(\.min){0,1}\.js/)){null!==o.match("(\\?|&)no-jquery")&&(s=!1),t=o.substring(0,o.indexOf(i[0]));break}e.scriptBase="",e.core_path=(t||"").toString(),"/"!==e.core_path.substr(-1)&&(e.core_path+="/");function u(e,t){"/"!==t.substr(-1)&&(t+="/"),l[e]=t}e.alias=u;var l={mz:e.core_path};function c(t,n){var r=0,o=null,i=n||e.core_path;return"/"!==i.substr(-1)&&(i+="/"),t?("@"==t.substr(0,1)&&-1!=(r=t.indexOf("/"))&&(o=t.substr(1,r-1))&&l.hasOwnProperty(o)&&(t=t.replace("@"+o+"/",l[o])),t.substr(0,2)in{"./":1,"~/":1}?i+t.substr(2):t):i}e.getPath=c;function d(e){var t=e;e instanceof jQuery&&(t=e[0]);var n=0,r=0;if(t)for(n=t.offsetLeft,r=t.offsetTop,t=t.offsetParent;null!=t;)n=(0|n)+t.offsetLeft|0,r=(0|r)+t.offsetTop|0,t=t.offsetParent;return{x:n,y:r}}e.getElementPosition=d,e.emptyFn=function(){},e.oldCopy=function(e,t){e=e||{},t=t||{};function n(e,t){for(var n in t)e[n]=t[n];return e}return e=n(e,t),t.hasOwnProperty&&t.hasOwnProperty("toString")&&"undefined"!=typeof t.toString&&e.toString!==t.toString&&(e.toString=t.toString),e};function p(t){var n=arguments[0]||{};if(arguments.length>1){for(var r=1;r<arguments.length;r++)n=e.oldCopy(n,arguments[r]);return n}return 1==arguments.length?e.oldCopy({},arguments[0]):n}e.copy=p;function h(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(arguments.length)for(var o=1;o<arguments.length;o++)for(var i in e)arguments[o]&&e[i]in arguments[o]&&(t[e[i]]=arguments[o][e[i]]);return t}e.mapXInto=h;function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments);return r.unshift(Object.keys(e)),h.apply(null,r)}e.mapInto=f;function m(e){return e&&"object"==typeof e?"toString"in e&&"[object Object]"==e.toString()?!0:"length"in e&&(e instanceof Array||"callee"in e||"push"in e&&"pop"in e)?!0:!1:!1}e.isIterable=m;function g(e){try{return String(e.toString()).trim()}catch(t){return""}}e.trim=g;var y=0;function v(){return"mz-elem-"+y++}e.getDOMID=v;function b(){return y++}e.genUID=b,e.intval=e.globalContext.intval=function(e,t){var n,r=typeof e;return"boolean"===r?+e:"string"===r?(n=parseInt(e,t||10),isNaN(n)||!isFinite(n)?0:n):"number"===r&&isFinite(e)?0|e:0},e.CBool=e.globalContext.CBool=function(t){if(!t||null==t||void 0==t)return!1;if("string"==typeof t){if("false"==t.toLowerCase())return!1;if("0"==t.toLowerCase())return!1;if(t.trim().length)return!0}return 0!=e.intval(t)?!0:!1};var E={};window.location&&window.location.search.toString().replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,n,r){return E[t]=r,e}),e.queryString=function(e){return e in E?E[e]:null},e.readBool=function(e,t,n){return"function"==typeof e?!!e(t,n):!!e},e.readString=function(e,t,n){if("function"==typeof e){var r=e(t,n);return null!=r?""+r:""}return""+isDef(e)&&null!==e?e:""},e.readVar=function(e,t,n){return"function"==typeof e?e(t,n):e},e.delayer=function(e,t,n){var r=null;t=t||16;var o=function(){r&&clearTimeout(r);var o=arguments;return n=n||this,r=setTimeout(function(){e.apply(n||null,o),r=null},t)};return o.now=function(){return r&&clearTimeout(r),r=null,e.apply(n||null,arguments)},o.cancel=function(){r&&clearTimeout(r),r=null},o},e.screenDelayer=function(e,t){var n=null,r=function(){n&&cancelAnimationFrame(n);var r=arguments;return t=t||this,n=requestAnimationFrame(function(){e.apply(t||null,r),n=null})};return r.now=function(){return n&&cancelAnimationFrame(n),n=null,e.apply(t||null,arguments)},r.cancel=function(){n&&cancelAnimationFrame(n),n=null},r},e.traspose=function(e){return Object.keys(e[0]).map(function(t){return e.map(function(e){return e[t]})})},e.now="performance"in window&&window.performance.now?function(){return window.performance.now()}:function(){return(new Date).getTime()},e.blankImage="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",e.transformTag=null;var _;!function(t){var n;!function(t){function n(e,t,n){var r=!(n in e)||null==e[n],o=!(n in t)||null==t[n];return r!=o?o?-1:1:1==r||e[n]==t[n]?0:2*+(e[n]>t[n])-1}t.null_arriba=n;function r(e,t,n){var r=!(n in e)||null==e[n],o=!(n in t)||null==t[n];return r!=o?o?1:-1:1==r||e[n]==t[n]?0:2*+(e[n]>t[n])-1}t.null_abajo=r;function o(t){if("function"==typeof t)return t;var n=this.null_abajo,r=this.null_arriba;if("string"==typeof t){t=t.split(",");for(var o in t){t[o]=e.trim(t[o]);var i=t[o].toUpperCase();/(( ASC)|( DESC))$/.test(i)&&(t[o]={invertir:/( DESC)$/.test(i),campo:t[o].replace(/( ASC)$|( DESC)$/,"")})}}return function(e,o){var i=0;for(var a in t)if("string"==typeof t[a]?i=n(e,o,t[a]):(i=t[a].null_abajo?n(e,o,t[a].campo):r(e,o,t[a].campo),t[a].invertir&&(i*=-1)),0!=i)return i;return i}}t.build=o}(n=t.order||(t.order={}))}(_=e.data||(e.data={})),e.hardCodedFiles={};function w(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}e.escapeRegExp=w;var C={};function N(e){if(e=c(e),e in C)return C[e];var t,n,r=document.getElementsByTagName("link");for(t=0,n=r.length;n>t;t++)if("stylesheet"==r[t].rel&&r[t].href.split("?")[0]==e)return;if("createStyleSheet"in document)return C[e]=document.createStyleSheet(e);var o=$("<link rel='stylesheet' href='"+e+"' type='text/css' />");return o.appendTo($("head")),C[e]=o}e.loadCss=N;function S(e){var t=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,n=e.toString().match(t);return{params:n[1].split(","),body:n[2]}}e.fnInfo=S;function T(e){var t=S(e),n=t.body.replace(/return false[;}]/gi,"{ continue _coreloop; }").replace(/return true[;}]/gi,"{ _retval.push($item$); continue _coreloop; }").replace(/return ([^;}]+?)/gi,"{ if ($1) { _retval.push($item$) }; continue _coreloop; }"),r=["var _retval = new Array(), _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");r=r.replace(/\$filter\$/gi,n),r=r.replace(/\$item\$/gi,t.params[0]),r=r.replace(/\$args\$/gi,t.params[1]);var o=new Function("_items,_args",r);return o.displayName=o.name="compiledFilter",o}e.compileFilter=T;function z(){var e=630,t=460;return document.body&&document.body.offsetWidth&&(e=document.body.offsetWidth,t=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(e=document.documentElement.offsetWidth,t=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e=window.innerWidth,t=window.innerHeight),{width:e,height:t}}e.getWindowSize=z;var x=0;function D(t){return x++,e["__"+x]=t,"mz.__"+x}e.globalCallback=D;function A(e,t){var n=t||arguments.callee.caller.arguments;if("string"==typeof e){for(var r in n)if(typeof n[r]==e)return n[r]}else if("function"==typeof e)for(var r in n)if(n[r]instanceof e)return n[r]}e.buscarArgumentoTipo=A}(mz||(mz={}));var mz;!function(e){var t;!function(e){var t=function(e){var t,n,r,o=/[{}]/g;return function(i){var a=e;return t!==a&&(t=a,r=a.split(" "),n=r.map(function(e){return e.replace(/(?=.)/g,"\\")})),i instanceof RegExp?a===e?i:new RegExp(i.source.replace(o,function(e){return n[~~("}"===e)]}),i.global?"g":""):r[i]}}("{ }"),n={},r=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;function o(e,t,r){return e&&(n[e]=n[e]||o.internalTmpl(e)).call(t,r||t)}e.tmpl=o;var o;!function(e){e.debug=!1;function n(n,r){e.debug&&console.groupCollapsed(n);var i=n;n=(n||t(0)+t(1)).replace(t(/\\{/g),"￰").replace(t(/\\}/g),"￱"),r=a(n,s(n,t(/{/),t(/}/)));var u=(r[0]||r[2]||r[3]?"["+r.map(function(e,t){return t%2?o(e,!0):'"'+e.replace(/\r\n/g,"\\n").replace(/\r/g,"\\n").replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':o(r[1])).replace(/\uFFF0/g,t(0)).replace(/\uFFF1/g,t(1));0==u.trim().length&&(u="void 0"),e.debug&&(console.log(u),console.groupEnd());var l=new Function("scope","return ("+u+")");return l.mzt=i,l}e.internalTmpl=n;function o(n,r){return e.debug&&console.log("expr:",n),n=n.replace(/\n/g," ").replace(t(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w-#\. "']+ *:/.test(n)?"["+s(n,/["' ]*[\w-#\. ]+["' ]*:/,/,(?=["' ]*[\w-#\. ]+["' ]*:)|}|$/).map(function(e){return e.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(e,t,n){return n.replace(/[^&|=!><]+/g,i)+'?"'+t+'":"",'})}).join("")+'].join(" ").trim()':i(n,r)}e.expr=o;function i(e,t){return e=e.trim(),e?"\n                (function(){ \n                    var v; \n                    try { \n                        v = "+(e.replace(r,function(e,t,n){return n?"\n                            (typeof "+n+' === "undefined" ? typeof this.'+n+' === "undefined" ? this.get && this.get("'+n+'") : this.'+n+" : "+n+")":e})||"[][0]")+("\n                    } catch(e) { }\n                    return "+(t===!0?' !v && v !== 0 ? "" : v':"v")+";\n                }).call(this)"):""}e.wrap=i;function a(e,t){var n=[];return t.map(function(t,r){r=e.indexOf(t),n.push(e.slice(0,r),t),e=e.slice(r+t.length)}),n.concat(e)}e.split=a;function s(e,t,n){var r,o=0,i=[],a=new RegExp("("+t.source+")|("+n.source+")","g");return e.replace(a,function(t,n,a,s){!o&&n&&(r=s),o+=n?1:-1,o||null==a||i.push(e.slice(r,s+a.length))}),i}e.extract=s}(o=e.tmpl||(e.tmpl={}))}(t=e.view||(e.view={}))}(mz||(mz={}));var mz;!function(e){e.HIDDEN_PROP=function(){var e=["webkit","moz","ms","o","Webkit"];if("undefined"==typeof document)return null;if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}(),e.hiddenProp=e.HIDDEN_PROP;var t;"undefined"!=typeof document&&(t=document.createElement("div")),e.TRANSFORM_STYLE=function(){var e=["webkit","moz","ms","o","Webkit"];if(!t)return null;if("transform"in t.style)return"transform";for(var n=0;n<e.length;n++)if(e[n]+"Transform"in t.style)return e[n]+"Transform";return null}(),e.TRANSFORM_CSS=function(){var e=["webkit","moz","ms","o","Webkit"];if(!t)return null;if("transform"in t.style)return"transform";for(var n=0;n<e.length;n++)if(e[n]+"Transform"in t.style)return"-"+e[n]+"-transform";return null}()}(mz||(mz={}));var mz;!function(e){var t=/\s+/g,n=function(){function e(){this.cb=null,this.evento=null,this.sharedList=null,this.object=null}return e.prototype.off=function(){this.object&&(this.cb&&this.object.off(this),this.cb=null,this.object=null)},e}();e.EventDispatcherBinding=n;var r=function(){function e(){this.ed_bindeos={},this.ed_bindeosTotales=[],this.ed_bindCount=0,this.trigger=this.emit}return e.prototype.on=function(e,r,o){var i=this;this.ed_bindCount++;var a,s=e.split(t),u=[];return s.forEach(function(e){a=new n,a.id=i.ed_bindCount,a.cb=null,a.evento=e,a.sharedList=u,a.object=i,u.push(a),o?a.cb=function(){r.apply(this,arguments),a.cb=null}:a.cb=r,i.ed_bindeosTotales[a.id]=a,i.ed_bindeos[e]=i.ed_bindeos[e]||[],i.ed_bindeos[e].push(a)}),a},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.off=function(e,t){if(e instanceof n)e.cb=null,e.sharedList&&e.sharedList.length&&e.sharedList.forEach(function(e){e.cb=null});else if("string"==typeof e)if("function"==typeof t)for(var r in this.ed_bindeos)this.ed_bindeos[r].cb===t&&(this.ed_bindeos[r].cb=null);else"string"==typeof e&&(this.ed_bindeos[e]=[]);else if("function"==typeof e)for(var r in this.ed_bindeos)this.ed_bindeos[r].cb===e&&(this.ed_bindeos[r].cb=null);else if(void 0===e&&void 0===t)for(var r in this.ed_bindeos)delete this.ed_bindeos[r].cb},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e in this.ed_bindeos){if(1==arguments.length){var r=[];for(var o in this.ed_bindeos[e])if(this.ed_bindeos[e][o].cb){var i=this.ed_bindeos[e][o].cb.call(this);void 0!==i&&r.push(i)}return r}if(2==arguments.length){var r=[];for(var o in this.ed_bindeos[e])if(this.ed_bindeos[e][o].cb){var i=this.ed_bindeos[e][o].cb.call(this,arguments[1]);void 0!==i&&r.push(i)}return r}if(arguments.length>2){var a=Array.prototype.slice.call(arguments,1),r=[];for(var o in this.ed_bindeos[e])if(this.ed_bindeos[e][o].cb){var i=this.ed_bindeos[e][o].cb.apply(this,a);void 0!==i&&r.push(i)}return r}}},e.EVENTS={},e}();e.EventDispatcher=r}(mz||(mz={}));var __extends=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},mz;!function(e){var t=function(t){__extends(n,t);function n(e){t.call(this),this.data={},e&&this.setValues(e)}return n.prototype.getAll=function(){return this.data},n.prototype.setValues=function(e,t){e instanceof n&&(e=e.getAll());for(var r in e)this.set(r,e[r],!t);this.emit(n.EVENTS.setValues,this.data,e)},n.prototype.set=function(e,t,r){if(isDef(e)){var o=this.data[e];this.data[e]=t;var i=e+"_changed";i in this&&"function"==typeof this[i]&&this[i](t,o),this.emit(i,this.data[e],o),!r&&this.emit(n.EVENTS.valueChanged,this.data,e,this.data[e],o)}},n.prototype.get=function(e){return this.data[e]},n.EVENTS=e.copy({setValues:"setValues",valueChanged:"valueChanged"},e.EventDispatcher.EVENTS),n}(e.EventDispatcher);e.MVCObject=t}(mz||(mz={}));var mz;!function(e){var t;!function(e){function t(e,t){delete e[t]&&Object.defineProperty(e,t.toString(),{get:function(){return this.data[t]},set:function(e){this.set(t,e)},enumerable:!0})}e.proxy=t}(t=e.MVCObject||(e.MVCObject={}))}(mz||(mz={}));var mz;!function(e){var t;!function(t){var n;!function(t){function n(e,t,n){return{value:function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var o=e.map(function(e){return JSON.stringify(e)}).join(),i=n.value.apply(this,e),a=JSON.stringify(i);return console.log("LogResult: "+t+"("+o+") => "+a),i}}}t.LogResult=n;function r(e,t,n){return n.enumerable=!1,n}t.noEnumerable=r;var o=0;function i(e){return function(e,t,n){return console.error(t+": !!ALERTA, LOS DECORADORES mz.core.decorators.delayer & screenDelayer NO FUNCIONAN AUN"),n}}t.delayer=i;function a(t,n,r){var i=r.value,a="[[delayer-"+o++ +"]]";return console.error(n+": !!ALERTA, LOS DECORADORES mz.core.decorators.delayer & screenDelayer NO FUNCIONAN AUN"),r.value=function(){var t=this[a]=this[a]||e.screenDelayer(i,this);return t.apply(this,arguments)},r}t.screenDelayer=a}(n=t.decorators||(t.decorators={}))}(t=e.core||(e.core={}))}(mz||(mz={}));var mz;!function(e){var t;!function(t){var n=function(){function t(t,n,r){this.value=t,this.component=n,this.scope=r,this.listening=[];var o=e.view.tmpl(t,n,r);"undefined"==typeof o&&(o=""),this.rootNode=e.dom.adapter.createTextNode(o),this.rootNode.$tmpl=t,this.rootNode.$component=n,this.rootNode.$scope=r,this.rootNode.$widget=this}return t.prototype.setup=function(t,n,r){this.value=t,this.component=n,this.scope=r;var o=e.view.tmpl(t,n,r);("undefined"==typeof o||null===o)&&(o=""),this.rootNode.textContent=o,this.rootNode.$tmpl=t,this.rootNode.$component=n,this.rootNode.$scope=r,this.rootNode.$widget=this},t.prototype.unmount=function(){this.rootNode.remove(),this.rootNode.$tmpl=null,this.rootNode.$component=null,this.rootNode.$scope=null,this.rootNode.$widget=null;for(var e=0,n=this.listening;e<n.length;e++){var r=n[e];r&&r.off&&r.off()}this.listening.length=0,this.value=this.component=this.scope=null,t.returnToPoll(this)},t.prototype.refreshScope=function(){var t=e.view.tmpl(this.value,this.component,this.scope);("undefined"==typeof t||null===t)&&(t=""),this.rootNode.textContent!=t&&(this.rootNode.textContent=t)},t.returnToPoll=function(e){e&&this.pollObjects.push(e)},t.getFromPoll=function(e,n,r){var o=null;return this.pollObjects.length?(o=this.pollObjects.pop(),o.setup(e,n,r),o):new t(e,n,r)},t.pollObjects=[],t}();t.TextNode=n}(t=e.widgets||(e.widgets={}))}(mz||(mz={}));var __decorate=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=3>i?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(3>i?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},mz;!function(e){var t=function(){function e(e,t,n){this.widget=e,this.component=t,this.value=n,this.mount()}return e.prototype.mount=function(){},e.prototype.unmount=function(){delete this.widget,delete this._value},e.prototype.changed=function(e,t){},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){if(e!==this._value){this._value;this._value=e,this.changed(e)}},enumerable:!0,configurable:!0}),e}();e.AttributeDirective=t;var t;!function(e){function t(t){return function(n){var r=t.toLowerCase();r in e.directives&&console.warn("There is alredy a directive for '"+r+"'. It would be replaced."),e.directives[r]=n}}e.Register=t,e.directives={}}(t=e.AttributeDirective||(e.AttributeDirective={}));function n(e){e&&"object"==typeof e&&"refreshScope"in e&&e.refreshScope()}var r,o,i=/^__(\d)+$/,a=/\{|\}/,s=/^{scope\./,u=new DOMParser;try{r=u.parseFromString("INVALID","text/xml"),o=r.getElementsByTagName("parsererror")[0].namespaceURI}catch(l){}function c(e){var t=e.reduce(function(t,n,r){return t+=n,r!=e.length-1&&(t+="__"+r),t},""),n=u.parseFromString(t,"text/xml"),r=n.getElementsByTagNameNS(o,"parsererror"),i="";if(r.length>0)throw i=r[0].textContent.split("\n")[0],"invalid jsx: "+i+"\n"+t;return n}var d=/^\{([A-Za-z0-9_$\-]+)\}$/,p=/^\{this\.([A-Za-z0-9_$\-]+)\}$/;function h(t,n,r,o,i){var a;return(a=d.exec(n))||(a=p.exec(n))?r.on(a[1]+"_changed",function(e,n){e!==n&&o.attr(t)!=e&&o.attr(t,e)}):r.on("valueChanged",function(a,s,u,l){if(u!==l&&-1!=n.indexOf(s)){var c=e.view.tmpl(n,r,i);o.attr(t)!=c&&o.attr(t,c)}})}var f="allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,typemustmatch,visible".split(",");f.forEach(function(e){return f[e]=!0}),e.widgetTemplateSource={};function m(t,n,r,o){var u;if(t instanceof CDATASection)return e.dom.adapter.createTextNode(t.nodeValue);if(t.nodeValue){var l=t.nodeValue;if(0===l.trim().length)return;if(u=l.match(i))return n[parseInt(u[1])];if(a.test(l)){var c=e.widgets.TextNode.getFromPoll(l,r,o);return r&&!s.test(l)&&((u=d.exec(l))||(u=p.exec(l))?c.listening.push(r.on(u[1]+"_changed",function(e,t){e!=t&&(("undefined"==typeof e||null===e)&&(e=""),c.rootNode.textContent!=e&&(c.rootNode.textContent=e))})):c.listening.push(r.on("valueChanged",function(t,n,i,a){if(i!=a&&-1!=l.indexOf(n)){var s=e.view.tmpl(l,r,o);("undefined"==typeof s||null===s)&&(s=""),c.rootNode.textContent!=s&&(c.rootNode.textContent=s)}}))),c}return"string"==typeof l?document.createTextNode(l):l}var f;u=t.localName.match(i),f=u?n[parseInt(u[1])]:e.widgets[t.localName.toLowerCase()];for(var m=null,y={},v={},b=t.attributes.length-1;b>=0;b--){var E=t.attributes[b];y[E.name]=E.value,u=E.value.match(i),u?y[E.name]=n[parseInt(u[1])]:"string"==typeof E.value&&(y[E.name]=e.view.tmpl(E.value,r,o),"function"==typeof y[E.name]?y[E.name]=y[E.name].bind(r):a.test(E.value)&&(v[E.name]=E.value,y[":"+E.name+"_upd"]=function(t,n,r){return function(){return e.view.tmpl(t,n,r)}}(E.value,r,o))),"name"==E.name&&(m=y[E.name]),"scope"==E.name&&(o=y[E.name])}f=f||e.widgets.BaseElement;var _=f.EMPTY_TAG?[]:g(t,n,r,o),w=new f(t,y,_,n,r,o);for(var C in v)"string"==typeof v[C]&&r&&w.listening.push(h(C,v[C],r,w,o));return"content"!=t.nodeName||r._contentSelector&&"content"!=r._contentSelector||(r.contentNode=w.rootNode),m&&r&&(r[m]=w),w}function g(e,t,n,r){for(var o=[],i=0;i<e.childNodes.length;i++){var a=m(e.childNodes[i],t,n,r);a&&o.push(a)}return o}function y(e,t){return function(n){var r={event:n.originalEvent,data:t.scope,element:t.rootNode,$element:t.DOM,jQueryEvent:n};return e.call(t,r)}}function v(e){console.error("Error loading template. ",this,e)}var b=/^on[_]{0,1}(.*)$/,E=/^:(.*)_upd$/,_={tag:1},w=function(r){__extends(o,r);function o(e,t,n,i,a,s){void 0===i&&(i=null),void 0===a&&(a=null),r.call(this),this._params=i,this._parentComponent=a,this.listening=[],this.innerWidget=null,this.originalNode=e,this.contentFragment=document.createDocumentFragment(),this.contentNode=this.rootNode=document.createElement(t&&t.tag||e&&e.nodeName||this.constructor.nodeName||this.constructor.name||"div"),this.rootNode.$widget=this,this.rootNode.$component=a||this,this.scope=s||null,this.children=n,this.defaultTemplate&&(this.startComponent([this.defaultTemplate]),this.emit(o.EVENTS.ComponentMounted)),t&&this.initAttr(t),this.defaultTemplate&&this.appendChildrens()}return o.prototype.scope_changed=function(e){this.rootNode.$scope=e},Object.defineProperty(o.prototype,"DOM",{get:function(){return this._cachedDOM||(this._cachedDOM=$(this.rootNode))},enumerable:!0,configurable:!0}),o.prototype.generateScopedContent=function(e){return g(this.originalNode,this._params,this._parentComponent,e||this)},o.prototype.attr=function(n,r){var o=n.toLowerCase();if(1==arguments.length)return this.attrDirectives&&o in this.attrDirectives?this.attrDirectives[o].value:this.data[n];var i=o in f,a=typeof r;if(i&&("function"===a&&(r=r()),r=e.CBool(r),a="boolean"),this.set(n,r),o in t.directives&&t.directives[o])this.attrDirectives||(this.attrDirectives={}),o in this.attrDirectives?this.attrDirectives[o].value=r:this.attrDirectives[o]=new t.directives[o](this,this._parentComponent,r);else if(i)r?e.dom.adapter.hasAttribute(this.rootNode,n)||e.dom.adapter.setAttribute(this.rootNode,n,n):e.dom.adapter.hasAttribute(this.rootNode,n)&&e.dom.adapter.removeAttribute(this.rootNode,n);else if(b.test(n)&&"function"===a){var s=b.exec(n)[1];/^on_/.test(n)?this.listening.push(this.on(s,r)):this.DOM.on(s,y(r,this))}else if(("string"===a||"number"===a||"boolean"===a)&&!/^:/.test(n)){if(o in _)return;e.dom.adapter.setAttribute(this.rootNode,n,r)}},o.prototype.refreshScope=function(){var e=this.data;for(var t in e){var r=null;"function"==typeof e[t]&&(r=E.exec(t))&&this.attr(r[1],e[t]())}this.children.forEach(n)},o.prototype.find=function(e){return this.DOM.find(e)},o.prototype.loadTemplate=function(t,n){var r=this;if(void 0===n&&(n=!1),t in e.widgetTemplateSource)return this.startComponent(e.widgetTemplateSource[t]),this.componentInitialized(),this.emit(o.EVENTS.ComponentMounted),void requestAnimationFrame(function(){return r.resize()});var i=new XMLHttpRequest,a=e.getPath(t);i.addEventListener("load",function(n){if(i.responseXML&&i.responseXML instanceof Document)e.widgetTemplateSource[t]=i.responseXML,r.startComponent(i.responseXML),r.componentInitialized(),r.emit(o.EVENTS.ComponentMounted),requestAnimationFrame(function(){return r.resize()});else{if(!i.responseText||!i.responseText.length)throw new TypeError("Unexpected response for mz.Widget.loadTemplate. Url: "+a+" ("+t+")");e.widgetTemplateSource[t]=[i.responseText],r.startComponent([i.responseText],[]),r.componentInitialized(),r.emit(o.EVENTS.ComponentMounted),requestAnimationFrame(function(){return r.resize()})}}),i.onerror=v,i.open("GET",a,!n),i.send()},o.prototype.componentInitialized=function(){},o.prototype.startComponent=function(t){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(t){var i=t instanceof Array?c(t):t;r=r||[],r.forEach(function(e,t){"function"==typeof e&&(r[t]=e.bind(n))}),i.childNodes.length>1&&console.warn("Only one child node is allowed per widget.",i,this),this.innerWidget=m(i.firstChild,r,this,this.scope)}if(this._unwrapedComponent){var a=this.rootNode;this.DOM;if(this.innerWidget&&(this.rootNode=this.innerWidget.rootNode,this.rootNode!=a)){for(var s=0;s<a.attributes.length;s++){var u=a.attributes[s];"specified"in u&&!u.specified||("class"==u.name.toLowerCase()?e.dom.adapter.addClass(this.rootNode,u.value):e.dom.adapter.setAttribute(this.rootNode,u.name,u.value))}a&&a.parentElement&&e.dom.adapter.replaceChild(a.parentElement,this.rootNode,a)}}else e.dom.adapter.appendChild(this.rootNode,this.innerWidget.rootNode);this.contentNode||(this.contentNode=this.rootNode||this.contentNode);var l=!1;return this._contentSelector&&(l=this.findContentSelector()),l||this.appendChildrens(),this.innerWidget},o.prototype.appendChildrens=function(){var t=this;this.children.forEach(function(n){n&&"object"==typeof n?"rootNode"in n&&n.rootNode instanceof Node?t.contentFragment.appendChild(n.rootNode):"DOM"in n&&n.DOM?n.DOM.appendTo(t.contentFragment):"node"in n&&n.node?t.contentFragment.appendChild(n.node):n instanceof Node?t.contentFragment.appendChild(n):e._debug&&console.warn("Trying to add unknown child ",n," to Widget!",t):n&&"string"==typeof n&&n.length>0&&t.contentFragment.appendChild(document.createTextNode(n))}),this.contentNode?this.contentNode.appendChild(this.contentFragment):this.contentFragment.firstChild&&console.error("There is child elements on a Widget with wrong or without contentSelector ",this)},o.prototype.findContentSelector=function(){var t=this.contentNode;return this.contentNode=":root"==this._contentSelector?this.rootNode:e.dom.adapter.querySelector(this.rootNode,this._contentSelector),t!==this.contentNode&&this.contentNode?(this.appendChildrens(),!0):!1},o.prototype.append=function(t){if(t&&"object"==typeof t)if(t instanceof Node)this.contentNode.appendChild(t);else if(t instanceof o)this.contentNode.appendChild(t.rootNode);else{if(!(t instanceof e.widgets.TextNode))return t instanceof $?t.appendTo($(this.contentNode)):"DOM"in t&&t.DOM instanceof $?t.DOM.appendTo($(this.contentNode)):this.contentNode&&$(t).appendTo(this.contentNode);this.contentNode.appendChild(t.rootNode)}},o.prototype.appendTo=function(e){return e&&e instanceof o?e.append(this):e&&"object"==typeof e&&"DOM"in e&&e.DOM instanceof $?e.DOM.append(this.rootNode):e&&e instanceof $?e.append(this.rootNode):$(e).append(this.rootNode)},o.prototype.initAttr=function(e){if(e)for(var t in e)this.attr(t,e[t])},o.prototype.resize=function(){this.emit(o.EVENTS.ComponentResized),this.innerWidget&&this.innerWidget.resize&&this.innerWidget.resize(),this.children.forEach(function(e){return e&&"object"==typeof e&&e.resize&&e.resize()})},o.prototype.unmount=function(){if(this.attrDirectives)for(var t in this.attrDirectives)"unmount"in this.attrDirectives&&this.attrDirectives[t].unmount();e.dom.adapter.remove(this.rootNode),this._cachedDOM&&this._cachedDOM.remove(),this.emit(o.EVENTS.ComponentUnmounted),this.off();for(var n=0,r=this.listening;n<r.length;n++){var t=r[n];t&&t.off&&t.off()}this.listening.length=0,delete this.data;for(var i=0,a=this.children;i<a.length;i++){var s=a[i];"unmount"in s&&s.unmount()}this.children.length=0},o.RegisterComponent=function(t){return function(n){t.toLowerCase()in e.widgets&&console.warn("Component ",t," alredy registered"),n.nodeName=t,e.widgets[t.toLowerCase()]=n}},o.ConfigureEmptyTag=function(e){e.EMPTY_TAG=!0},o.Template=function(e,t){return function(n){n.prototype.defaultTemplate=e,t&&t.length&&(n.prototype._contentSelector=t)}},o.ConfigureUnwrapped=function(e){e.prototype._unwrapedComponent=!0},o.ConfigureTag=function(e){return function(e){e.prototype.tagName=!0}},o.Attribute=function(e,t){if(delete e[t]){t.toString();Object.defineProperty(e,t.toString(),{get:function(){return this.attr(t)},set:function(e){this.attr(t,e)},enumerable:!0})}},o.EMPTY_TAG=!1,o.props={},o.nodeName=null,o.EVENTS=e.copy({ComponentUnmounted:"unmount",ComponentResized:"resize",ComponentMounted:"mount"},e.MVCObject.EVENTS),__decorate([e.MVCObject.proxy,__metadata("design:type",Object)],o.prototype,"scope",void 0),o}(e.MVCObject);e.Widget=w}(mz||(mz={}));var mz;!function(e){var t;!function(t){var n=function(e){__extends(t,e);function t(t,n,r,o,i,a){void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null),t&&(n.tag=t.nodeName),e.call(this,t,n,r,o,i,a),this.appendChildrens()}return t}(e.Widget);t.BaseElement=n;var r=function(e){__extends(t,e);function t(t){e.call(this,null,t||{},[],this,this,null)}return t}(e.Widget);t.BasePagelet=r;var o=function(e){__extends(t,e);function t(t,n){e.call(this,null,n||{},[],this,this,null),this.startComponent([t])}return t}(e.Widget);t.InlinePagelet=o}(t=e.widgets||(e.widgets={}))}(mz||(mz={}));var mz;!function(e){var t;!function(t){var n=function(t){__extends(n,t);function n(n,o,i,a,s,u){var l=this;t.call(this,n,o,[],a,s,u),this.panels=new e.Collection;var c=null;i.forEach(function(e){e instanceof r&&(c=c||e,e.parent=l)}),c&&this.show(c)}return n.prototype.show=function(t){t&&this.panelVisible!==t&&(this.panels.contains(t)||(this.panels.push(t),t.appendTo(this.contentNode),t instanceof r&&(t.parent=this)),this.panelVisible&&e.dom.adapter.remove(this.panelVisible.rootNode),this.panelVisible=t,e.dom.adapter.appendChild(this.contentNode,this.panelVisible.rootNode),this.panelVisible.show(),t.resize())},n.prototype.resize=function(){this.panelVisible&&this.panelVisible.resize(),t.prototype.resize.call(this);
},__decorate([e.MVCObject.proxy,__metadata("design:type",r)],n.prototype,"panelVisible",void 0),n=__decorate([e.Widget.RegisterComponent("mz-switcher"),__metadata("design:paramtypes",[Node,Object,Array,Object,Object,Object])],n)}(e.Widget);t.MzSwitcher=n;var r=function(t){__extends(n,t);function n(){t.apply(this,arguments)}return n.prototype.show=function(){this.parent&&this.parent.show(this)},n.prototype.isVisible=function(){return this.DOM.is(":visible")},n=__decorate([e.Widget.RegisterComponent("mz-switcher-panel"),__metadata("design:paramtypes",[])],n)}(e.Widget);t.MzSwitcherPanel=r}(t=e.widgets||(e.widgets={}))}(mz||(mz={}));var mz;!function(e){var t;!function(t){var n=function(e){__extends(t,e);function t(t){e.call(this,null,{tag:"div"},[],this,this,this),this.routeHandler={},this.parent=t}return t.prototype.handleRoute=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},t.prototype.show=function(){var t=this;e.prototype.show.call(this),this.parent.actualPage=this,requestAnimationFrame(function(){return t.resize()}),document.addEventListener("resetScrollView",function(){t.resize()})},t}(e.widgets.MzSwitcherPanel);t.Page=n;var r=function(t){__extends(r,t);function r(n){var r=this;if(t.call(this,null,{tag:"div","class":"mz-page-coordinator"},[],this,this,void 0),this.loadingPage=!0,this.pages=n.pagesCollection||new e.Collection(null,{key:"name"}),n.templateHtml&&n.templateUrl)throw new Error("You must set only templateUrl or templateHtml, not both.");if(!n.pages)throw new Error("You must provide 'pages: Url(.json) | Array[]' option.");if("string"==typeof n.pages)e.xr.get(n.pages).then(function(e){return r.setPages(e.data)});else{if(!(n.pages instanceof Array))throw new TypeError("opc.pages must be an Array or Url(.json)");this.setPages(n.pages)}n.templateHtml?this.startComponent([n.templateHtml]):n.templateUrl?this.loadTemplate(n.templateUrl):$(function(){var e=document.createElement("app");e.appendChild(document.querySelector(n.templateSelector||"body *")),r.startComponent(e)}),$(function(){r.appendTo("body")})}return r.prototype.setPages=function(t){var n=this,r={},o={};this.pages.clear();for(var i=0;i<t.length;i++){var a=t[i];if(a.routes&&a.routes.length)for(var s=0,u=a.routes;s<u.length;s++){var l=u[s];l.route in o&&console.warn("Route "+l.route+" duplicated on page "+a.name+"."),r[l.name]={page:a,route:l.route,name:l.name},o[l.route]=l.name}this.pages.push(a)}var c={routes:o};this.routeHistory=[];var d=this;for(var p in r)!function(e){c[e.name]=function(){var t=arguments;d.loadingPage=!0,d.getPage(e.page.name).then(function(n){e.name in n.routeHandler&&n.routeHandler[e.name].apply(n,t),n.handleRoute.apply(n,[e.name].concat(t)),d.show(n),d.routeHistory.push(Backbone.history.getFragment()),d.loadingPage=!1})}}(r[p]);e.route.start(c,function(){n.emit("loaded"),n.loaded()})},r.prototype.loaded=function(){},r.prototype.show=function(e){if(!(e instanceof n))throw new Error("App only shows instances of Page");t.prototype.show.call(this,e),this.actualPage=e},r.prototype.navigate=function(t,n){void 0===n&&(n=!0),e.route.navigate(t,n)},r.prototype.getPage=function(t){var n=this,r=this.pages.indexedGet(t);return null==r?Promise.reject(Error("Page not found")):new Promise(function(t){e.require(r.module,function(e){return e.instance?t(e.instance):void t(e.instance=new e(n))})})},__decorate([e.MVCObject.proxy,__metadata("design:type",n)],r.prototype,"actualPage",void 0),__decorate([e.MVCObject.proxy,__metadata("design:type",Boolean)],r.prototype,"loadingPage",void 0),r=__decorate([e.Widget.ConfigureUnwrapped,e.Widget.Template(null,"content"),__metadata("design:paramtypes",[Object])],r)}(e.widgets.MzSwitcher);t.PageCoordinator=r}(t=e.app||(e.app={}))}(mz||(mz={}));var mz;!function(e){var t;!function(t){var n;!function(t){function n(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}return e.globalContext.decodeURIComponent(e.globalContext.escape(e.globalContext.atob(n)))}t.urlBase64Decode=n;function r(e){var t=e.split(".");if(3!==t.length)throw new Error("JWT must have 3 parts");var r=n(t[1]);if(!r)throw new Error("Cannot decode the token");return JSON.parse(r)}t.decodeToken=r;function o(e){var t=r(e);if("undefined"==typeof t.exp)return null;var n=new Date(0);return n.setUTCSeconds(t.exp),n}t.getTokenExpirationDate=o;function i(e,t){var n=o(e);return t=t||0,null===n?!1:!(n.valueOf()>(new Date).valueOf()+1e3*t)}t.isTokenExpired=i}(n=t.jwt||(t.jwt={}))}(t=e.auth||(e.auth={}))}(mz||(mz={}));var mz;!function(e){var t=e.mzLang||{},n=e.globalContext.idioma=e.globalContext.idioma||{},r={};e.translate=function(o,i){if(!(o in n)){if(o in t)return n[o]=t[o];o in r||(e._debug&&console.warn("ñ: "+o,i),r[o]=i||o,n[o]=i||o)}return n[o]},e.translate.faltantes=r,e.translate.idioma=n,e.globalContext["ñ"]=e.translate}(mz||(mz={})),Date.prototype.add=function(e,t){var n=this;if(!e||0==t)return n;switch(e.toLowerCase()){case"ms":n.setMilliseconds(n.getMilliseconds()+t);break;case"s":case"ss":n.setSeconds(n.getSeconds()+t);break;case"mi":case"m":case"mm":n.setMinutes(n.getMinutes()+t);break;case"h":case"hh":n.setHours(n.getHours()+t);break;case"d":case"dd":n.setDate(n.getDate()+t);break;case"mo":n.setMonth(n.getMonth()+t);break;case"y":case"yyyy":n.setFullYear(n.getFullYear()+t)}return n},Date.prototype.part=function(e){var t=this;if(!e)return t;switch(e.toLowerCase()){case"ms":return("0000"+t.getMilliseconds().toString()).substr(-4);case"s":case"ss":return("00"+t.getSeconds().toString()).substr(-2);case"mi":case"m":case"mm":return("00"+t.getMinutes().toString()).substr(-2);case"h":case"hh":return("00"+t.getHours().toString()).substr(-2);case"d":case"dd":return("00"+t.getDate().toString()).substr(-2);case"mo":return("00"+(t.getMonth()+1).toString()).substr(-2);case"y":case"yyyy":return t.getFullYear().toString()}return e};var mz;!function(e){var t;!function(t){var n=/^[0-9]{4}(.{1})[0-9]{1,2}\1[0-9]{1,2}\T/;function r(t){if("object"==typeof t){var o;o=t instanceof Array?[]:{};for(var i in t)if("string"==typeof t[i])if("/Date("===t[i].substr(0,6)&&")/"===t[i].substr(-2))o[i]=l(t[i]);else if("T"===t[i].substr(10,1)&&t[i].length<32&&n.test(t[i])){var a=new Date(t[i]);isNaN(a)?o[i]=t[i]:o[i]=a}else o[i]=t[i];else e.isIterable(t[i])?o[i]=r(t[i]):o[i]=t[i];return o}return t}t.parseObject=r,t.dayNames=e.translate("#dayNames","Domingo|Lunes|Martes|Miercoles|Jueves|Viernes|Sabado").split("|"),t.abbrDayNames=e.translate("#abbrDayNames","Dom|Lun|Mar|Mie|Jue|Vie|Sab").split("|"),t.monthNames=e.translate("#monthNames","Enero|Febrero|Marzo|Abril|Mayo|Junio|Julio|Agosto|Septiembre|Octubre|Noviembre|Diciembre").split("|"),t.abbrMonthNames=e.translate("#abbrMonthNames","Ene|Feb|Mar|Abr|May|Jun|Jul|Ago|Sep|Oct|Nov|Dic").split("|"),t.firstDayOfWeek=0,t.format=e.translate("#DateFormat","dd/mm/yyyy"),t.fullYearStart="20";function o(e,t){Date.prototype[e]||(Date.prototype[e]=t)}o("isLeapYear",function(){var e=this.getFullYear();return e%4==0&&e%100!=0||e%400==0}),o("isWeekend",function(){return 0==this.getDay()||6==this.getDay()}),o("isWeekDay",function(){return!this.isWeekend()}),o("getDaysInMonth",function(){return[31,this.isLeapYear()?29:28,31,30,31,30,31,31,30,31,30,31][this.getMonth()]}),o("getDayName",function(t){return t?e.date.abbrDayNames[this.getDay()]:e.date.dayNames[this.getDay()]}),o("getMonthName",function(t){return t?e.date.abbrMonthNames[this.getMonth()]:e.date.monthNames[this.getMonth()]}),o("getDayOfYear",function(){var e=new Date("1/1/"+this.getFullYear());return Math.floor((this.getTime()-e.getTime())/864e5)}),o("getWeekOfYear",function(){return Math.ceil(this.getDayOfYear()/7)}),o("setDayOfYear",function(e){return this.setMonth(0),this.setDate(e),this}),o("addYears",function(e){return this.setFullYear(this.getFullYear()+e),this}),o("addMonths",function(e){var t=this.getDate();return this.setMonth(this.getMonth()+e),t>this.getDate()&&this.addDays(-this.getDate()),this}),o("addDays",function(e){return this.setTime(this.getTime()+864e5*e),this}),o("addHours",function(e){return this.setHours(this.getHours()+e),this}),o("addMinutes",function(e){return this.setMinutes(this.getMinutes()+e),this}),o("addSeconds",function(e){return this.setSeconds(this.getSeconds()+e),this}),o("zeroTime",function(){return this.setMilliseconds(0),this.setSeconds(0),this.setMinutes(0),this.setHours(0),this}),o("asString",function(t){var n=t||e.date.format;return n=n.split("mm").length>1?n.split("mmmm").join(this.getMonthName(!1)).split("mmm").join(this.getMonthName(!0)).split("mm").join(a(this.getMonth()+1)):n.split("m").join(this.getMonth()+1),n=n.split("yyyy").join(this.getFullYear()).split("yy").join((this.getFullYear()+"").substring(2)).split("dd").join(a(this.getDate())).split("d").join(this.getDate())});function i(e,n){n=n||t.format,n.replace("mo","mm");var r=new Date("01/01/1970");if(""==e)return r;e=e.toLowerCase();for(var o,i="",a=[],s=/(dd?d?|mm?m?|yy?yy?)+([^(m|d|y)])?/g;null!=(o=s.exec(n));){switch(o[1]){case"d":case"dd":case"m":case"mm":case"yy":case"yyyy":i+="(\\d+\\d?\\d?\\d?)+",a.push(o[1].substr(0,1));break;case"mmm":i+="([a-z]{3})",a.push("M")}o[2]&&(i+=o[2])}var u=new RegExp(i),l=e.match(u);if(!l)return r;for(var c=0;c<a.length;c++){var d=l[c+1];switch(a[c]){case"d":r.setDate(d);break;case"m":r.setMonth(Number(d)-1);break;case"M":for(var p=0;p<t.abbrMonthNames.length&&t.abbrMonthNames[p].toLowerCase()!=d;p++);r.setMonth(p);break;case"y":r.setFullYear(d)}}return r}t.fromString=i;var a=function(e){var t="0"+e;return t.substring(t.length-2)};t._offsetServer=0;function s(){var e=new Date;return e.setTime(e.getTime()+t._offsetServer),e}t.newSyncro=s;function u(n){e.xr.get(n).then(function(n){var r=n.xhr,o=r.getResponseHeader("Date")||r.getResponseHeader("date"),i=Date.parse(new Date(Date.parse(o)).toUTCString()),a=Date.parse((new Date).toUTCString());t._offsetServer=i-a,e._debug&&(console.log("Timer sincronizados con el servidor: offset="+t._offsetServer),console.log("Timer local:",new Date),console.log("Timer remoto:",s()))})}t.sync=u;function l(t,n){function r(t){return t?t instanceof Date?new Date(t):0==t.indexOf("/Date(")&&t.lastIndexOf("/")==t.length-1?new Date(e.intval(t.substr(6))):new Date(t):null}function o(e){if(e instanceof Date)return e;var t=null;if(e.match(/^\d{4}([./-])\d{1,2}\1\d{1,2}[ ]\d{1,2}:\d{1,2}/))t=new Date(e);else if(n&&e.match(/^\d{2}([./-])\d{2}\1\d{4}[ ]\d{2}:\d{2}/)&&n.startsWith("dd")){var r=e.substring(3,5),o=e.substring(0,2),i=e.substring(6,10);if(r>12){var a=o;o=r,r=a}var s=e.substring(11,13),u=e.substring(14,16);t=new Date(r+"/"+o+"/"+i+" "+s+":"+u)}else if(e.match(/^\d{2}([./-])\d{2}\1\d{4}[ ]\d{2}:\d{2}/)){var r=e.substring(3,5),o=e.substring(0,2),i=e.substring(6,10);if(r>12){var a=o;o=r,r=a}var s=e.substring(11,13),u=e.substring(14,16);t=new Date(r+"/"+o+"/"+i+" "+s+":"+u)}else{var l=new Date(t);isNaN(l)||(t=l)}return t}function i(e){if(e instanceof Date)return e;var t=null;if(e.match(/^\d{4}([./-])\d{1,2}\1\d{1,2}/))t=new Date(e);else if(e.match(/^\d{2}([./-])\d{2}\1\d{4}/)&&n&&(n.startsWith("mm")||n.startsWith("mo"))){var r=e.substring(3,5),o=e.substring(0,2),i=e.substring(6,10);if(o>12){var a=r;r=o,o=a}t=new Date(i,o,r)}else if(e.match(/^\d{2}([./-])\d{2}\1\d{4}/)){var o=e.substring(3,5),r=e.substring(0,2),i=e.substring(6,10);if(o>12){var a=r;r=o,o=a}t=new Date(i,o,r)}else{var s=new Date(t);isNaN(s)||(t=s)}return t}if(null==t)return null;if(t instanceof Date)return t;if("string"==typeof t){if(t=e.trim(t),0==t.indexOf("/Date(")&&t.lastIndexOf("/")==t.length-1)return r(t);if(10!=t.indexOf("T")||t.lastIndexOf("Z")!=t.length-1)return-1!=t.indexOf("UTC")?(t=t.replace(/-/,"/").replace(/-/,"/"),t=t.replace(/T/," ").replace(/Z/," UTC"),t=t.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2"),new Date(t)):-1!=t.indexOf("/")?-1!=t.indexOf(":")?o(t):i(t):new Date(t);var a=new Date(t);if(!isNaN(a))return a}else if("number"==typeof t)return new Date(t);return t}t.parse=l;function c(e,t,n){return this.parse(e).add(t,n)}t.add=c;function d(e){if(null===e)return"";if(e instanceof Date||(e=this.parse(e)),!(e instanceof Date))return"";if("asString"in e)return e.asString();var t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return 10>n&&(n="0"+n.toString()),10>t&&(t="0"+t.toString()),r.toString()+"/"+n.toString()+"/"+t.toString()}t.fmt_date=d;function p(e,t){if(null===e)return"";if(e instanceof Date||(e=this.parse(e)),!(e instanceof Date))return"";var n=e.getHours(),r=e.getMinutes(),o=e.getSeconds();return 10>r&&(r="0"+r.toString()),10>n&&(n="0"+n.toString()),10>o&&(o="0"+o.toString()),t=t||!1,n.toString()+":"+r.toString()+(0!=t?":"+o.toString():"")}t.fmt_time=p;function h(e,t){return null===e?"":(t=t||!1,this.fmt_date(e)+" "+this.fmt_time(e,t))}t.fmt_date_time=h;function f(e,t){return e&&e instanceof Date?(t||"yyyy/mo/dd hh:mm").replace(/(\w{4}|\w{2}|\w{1})/g,function(t){return e.part(t)}):""}t.toString=f;function m(e,t){e=Number(e||0);var n=0>e;n&&(e=-e);var r=Math.floor(e/3600),o=Math.floor(e/60-60*r),i=Math.floor(e%60);return 10>o&&(o="0"+o.toString()),10>i&&(i="0"+i.toString()),10>r&&(r="0"+r.toString()),(n?"-":"")+(t?"{0}:{1}:{2}":"{0}:{1}").format(r,o,i)}t.fmt_duracion=m;function g(t){if(null==t||t instanceof Number)return t;if("string"==typeof t&&-1!=t.indexOf(":")){var n=t.split(":"),r=e.intval(n[0]);return(0>r?-1:1)*Math.abs(r)*3600+60*e.intval(n[1])+(3==n.length?e.intval(n[2]):0)}return e.intval(t)}t.parseDuracion=g}(t=e.date||(e.date={}))}(mz||(mz={}));var mz;!function(e){var t;!function(t){function n(e){return function(t){return new Promise(function(n){return setTimeout(function(){return n(t)},e)})}}t.wait=n;function r(e){return new Promise(function(t){return setImmediate(function(){return t(e)})})}t["yield"]=r;function o(e){return new Promise(function(t){return requestAnimationFrame(function(){return t(e)})})}t.nextFrame=o;function i(t){var n=typeof t;return"boolean"!=n&&"number"!=n&&"string"!=n?Promise.resolve(e.date.parseObject(t)):Promise.resolve(t)}t.parseStringDates=i,"Response"in e.globalContext&&"fetch"in e.globalContext?t.parseJSON=function(t){return new e.globalContext.Response(t).json()}:t.parseJSON=function(e){var t;try{t=JSON.parse(e)}catch(n){return Promise.reject(n)}return Promise.resolve(t)}}(t=e.promise||(e.promise={}))}(mz||(mz={}));var mz;!function(e){var t=function(e){return{status:e.status,response:e.response,xhr:e,url:"",data:null}},n=function(e,t){var n=[];for(var r in e)n.push(""+encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t&&t.split("?").length>1&&n.push(t.split("?")[1]),n.join("&")},r=function(e,t){return(e&&e.promise?e.promise:o.defaults.promise)(t)};function o(i){return i.skipAuthorization||i.promise||e.oauth2.applyAuthorizationHeaders(i),r(i,function(r,a){var s=e.copy({},o.defaults);s.headers=e.copy(s.headers),e.copy(s,i);var u=s.xmlHttpRequest(),l=s.url,c=!1;s.url&&(s.url=e.getPath(s.url),c="file"==o.urlResolve(s.url).protocol);var d="object"!=typeof s.data||s.raw?s.data:s.dump.call(s,s.data);s.url&&s.url.contains("//")&&null==s.withCredentials?u.withCredentials=!0:s.withCredentials&&(u.withCredentials=s.withCredentials);var p=s.params?n(s.params):null;u.open(s.method,p&&p.length?""+s.url.split("?")[0]+"?"+p:s.url,!0),u.addEventListener(o.Events.READY_STATE_CHANGE,function(n){if(4==u.readyState){try{if(u.status>=500&&"true"==u.getResponseHeader("jsonerror")){var o=JSON.parse(u.responseText);console.error?console.error("JsonError: "+o.Message,o):console.log("JsonError: "+o.Message,o)}}catch(n){}var i=e.copy(t(u),{data:u.response?s.raw?u.response:s.load(u.response,u):null,url:l});if(!(i.data&&i.data instanceof Promise))return 0==u.status&&c||u.status>=200&&u.status<300?r(i,!1):a(i);i.data.then(function(e){return i.data=e,0==u.status&&c||u.status>=200&&u.status<300?r(i,!1):a(i)},function(e){return i.data=e,0==u.status&&c||u.status>=200&&u.status<300?r(i,!1):a(i)})}}),u.addEventListener(o.Events.ABORT,function(){return a(t(u))}),u.addEventListener(o.Events.ERROR,function(){var n=t(u);if(u.response)try{e.copy(n,{data:u.response?s.raw?u.response:s.load(u.response,u):null,url:l})}catch(r){}return a(n)}),u.addEventListener(o.Events.TIMEOUT,function(){return a(t(u))});for(var h in s.headers)u.setRequestHeader(h,s.headers[h]);for(var f in s.events)u.addEventListener(f,s.events[f].bind(null,u),!1);void 0!==d?u.send(d):u.send()})}e.xr=o}(mz||(mz={}));var mz;!function(e){var t;!function(t){t.Methods={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS"},t.Events={READY_STATE_CHANGE:"readystatechange",LOAD_START:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOAD_END:"loadend"};var n,r=function(t,n){return"string"==typeof t?e.promise.parseJSON(t).then(function(e){return"d"in e?e.d:e}).then(e.promise.parseStringDates):t};!function(e){e.json=function(e){return e instanceof FormData?("Content-Type"in this.headers&&delete this.headers["Content-Type"],e):(this.headers["Content-Type"]="application/json",JSON.stringify(e))},e.raw=function(e){return e.toString()},e.urlEncoded=function(e){this.headers["Content-Type"]="application/x-www-form-urlencoded";var t=[];for(var n in e)e.hasOwnProperty(n)&&"undefined"!=typeof e[n]&&("object"==typeof e[n]&&e[n]instanceof Date&&!isNaN(e[n])?t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n].toISOString())):t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n])));return t.join("&")},e.multipart=function(e){"Content-Type"in this.headers&&delete this.headers["Content-Type"];var t=new FormData;for(var n in e)e.hasOwnProperty(n)&&t.append(n,e[e]);return t}}(n=t.formatters||(t.formatters={})),t.defaults={method:t.Methods.GET,data:void 0,headers:{Accept:"application/json"},dump:n.json,load:r,xmlHttpRequest:function(){return new XMLHttpRequest},promise:function(e){return new Promise(e)},params:{},url:null,raw:!1,events:{},withCredentials:null};var o=document.createElement("a"),i=a(location.href);function a(e){var t=e;return o.setAttribute("href",t),t=o.href,o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}t.urlResolve=a;function s(e){var t="string"==typeof e?a(e):e;return t.protocol===i.protocol&&t.host===i.host}t.urlIsSameOrigin=s;function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.raw,o="";return t.forEach(function(e,t){var n=r[t];Array.isArray(e)&&(e=e.join("")),n.endsWith("$")?n=n.slice(0,-1):e=encodeURIComponent(e),o+=n,o+=e}),o+=r[r.length-1]}t.urlEncode=u,t.getAbsoluteUrl=function(){var t;return function(n){return t||(t=document.createElement("a")),t.href=e.getPath(n),t.href}}();function l(n,r,o){return t(e.copy({url:n,method:t.Methods.GET,params:r},o))}t.get=l;function c(n,r,o){return t(e.copy({url:n,method:t.Methods.PUT,data:r||{}},o))}t.put=c;function d(n,r,o){return t(e.copy({url:n,method:t.Methods.POST,data:r||{}},o))}t.post=d;function p(n,r,o){return t(e.copy({url:n,method:t.Methods.PATCH,data:r||{}},o))}t.patch=p;function h(n,r){return t(e.copy({url:n,method:t.Methods.DELETE},r))}t.del=h;function f(n,r){return t(e.copy({url:n,method:t.Methods.OPTIONS},r))}t.options=f}(t=e.xr||(e.xr={}))}(mz||(mz={}));var sp=String.prototype;"capitalize"in sp||(sp.capitalize=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}),"setAt"in sp||(sp.setAt=function(e,t){return this.substr(0,e)+t+this.substr(e+t.length)}),"endsWith"in sp||(sp.endsWith=function(e){return e=e.toString(),-1!==this.indexOf(e,this.length-e.length)}),"startsWith"in sp||(sp.startsWith=function(e){return e=e.toString(),0===this.indexOf(e)}),"contains"in sp||(sp.contains=function(e){return e=e.toString(),-1!==this.indexOf(e)}),sp.toCamelCase=function(){return this.toLowerCase().replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})},sp.format=function(){for(var e=this,t=0;t<arguments.length;t++){var n=new RegExp("\\{"+t+"\\}","gi");e=e.replace(n,arguments[t])}return e};var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;sp.isValidMail=function(){return this.length>5&&re.test(this)};var mz;!function(e){var t;!function(t){t.roleList=[];var n=null,r=null,o=null,i=null,a=null,s=[];t.currentDomain=u(location.href),t.currentClientID="mz-core";function u(e){var n,r=e.split("/");if(e.indexOf("://")>-1)n=r[2];else{if(!r[0].contains("."))return t.currentDomain;n=r[0]}return n=n.split(":")[0],n.toLowerCase()}function l(e){return{token:localStorage.getItem("JWT_"+e)||localStorage.getItem("JWT_"+t.currentDomain)||null,type:localStorage.getItem("JWTtype_"+e)||"bearer"}}t.tokenGetter=l;function c(t){if(e.auth.jwt.isTokenExpired(t,0))throw new Error("The provided token is expired");var n=e.auth.jwt.decodeToken(t);n.role&&n.role.length&&("string"==typeof n.role&&(n.role=[n.role]),h(n.role))}function d(n,r,o,i){if(n=n.toLowerCase(),r){if(e.auth.jwt.isTokenExpired(r,0))throw new Error("The provided token is expired");n==t.currentDomain&&c(r),localStorage.setItem("JWT_"+n,r),localStorage.setItem("JWTr_"+n,o),localStorage.setItem("JWTtype_"+n,i||"bearer")}else localStorage.removeItem("JWT_"+n),localStorage.removeItem("JWTr_"+n),localStorage.removeItem("JWTtype_"+n)}t.setToken=d;function p(e){return-1!=t.roleList.indexOf(e)}t.checkRole=p;function h(e){var n=e;t.roleList instanceof String&&(n=t.roleList.split(/[\|,]/g)),n.forEach(function(e){return-1==t.roleList.indexOf(e)&&t.roleList.push(e)})}t.pushRoles=h;var f={invalid_request:["The request is missing a required parameter, includes an","invalid parameter value, includes a parameter more than","once, or is otherwise malformed."].join(" "),invalid_client:["Client authentication failed (e.g., unknown client, no","client authentication included, or unsupported","authentication method)."].join(" "),invalid_grant:["The provided authorization grant (e.g., authorization","code, resource owner credentials) or refresh token is","invalid, expired, revoked, does not match the redirection","URI used in the authorization request, or was issued to","another client."].join(" "),unauthorized_client:["The client is not authorized to request an authorization","code using this method."].join(" "),unsupported_grant_type:["The authorization grant type is not supported by the","authorization server."].join(" "),access_denied:["The resource owner or authorization server denied the request."].join(" "),unsupported_response_type:["The authorization server does not support obtaining","an authorization code using this method."].join(" "),invalid_scope:["The requested scope is invalid, unknown, or malformed."].join(" "),server_error:["The authorization server encountered an unexpected","condition that prevented it from fulfilling the request.","(This error code is needed because a 500 Internal Server","Error HTTP status code cannot be returned to the client","via an HTTP redirect.)"].join(" "),temporarily_unavailable:["The authorization server is currently unable to handle","the request due to a temporary overloading or maintenance","of the server."].join(" ")},m=function(e){return new Promise(e)["catch"](function(n){return 401==n.status?t.refreshToken().then(function(t){return new Promise(e)},function(e){return e&&401==e.status&&t.emit("unauthorized"),Promise.reject(e)}):Promise.reject(n)})},g=function(e){var n=e;if(e&&e.data&&e.data.error){var r=f[e.data.error]||e.data.error_message||e.data.error;t.emit("error","refreshToken",e.data,r),"invalid_grant"==e.data.error&&(localStorage.removeItem("JWTr_"+t.currentDomain),t.emit("unauthorized")),n=new Error(r),n.name=e.data.error}return 401==e.status&&t.emit("unauthorized"),Promise.reject(n)};function y(e){var t=u(e.url),n=l(t);n.token&&(e.headers=e.headers||{},"bearer"==n.type?e.headers.Authorization="Bearer "+n.token:((e.params=e.params||{}).access_token=n.token,e.headers.Pragma="no-store",e.headers["Cache-Control"]="no-store"),e.promise=m)}t.applyAuthorizationHeaders=y;function v(e){if(n=e.loginUrl||null,r=e.refreshTokenUrl||null,o=e.logoutUrl||null,t.currentClientID=e.clientId||null,i=e.clientSecret||null,s=e.scopes||[],a=e.xhrWithCredentials,localStorage.getItem("JWT_"+t.currentDomain))try{c(localStorage.getItem("JWT_"+t.currentDomain))}catch(u){console.error(u)}localStorage.getItem("JWTr_"+t.currentDomain)&&r&&b()}t.configure=v;function b(){if(r){var n;return t.currentClientID&&(n=t.currentClientID+":",i&&(n+=i),n="Basic "+btoa(n)),e.xr.post(r,{grant_type:"refresh_token",refresh_token:localStorage.getItem("JWTr_"+t.currentDomain)||null},{skipAuthorization:!0,dump:e.xr.formatters.urlEncoded,headers:{Authorization:n},withCredentials:a}).then(function(e){if(e.data.access_token&&(t.emit("gotToken",e.data.token,e.data,t.currentDomain),d(t.currentDomain,e.data.access_token,e.data.refresh_token||null)),e.data.error){var n=f[e.data.error]||e.data.error_message||e.data.error;t.emit("error","refreshToken",e.data,n),"invalid_grant"==e.data.error&&localStorage.removeItem("JWTr_"+t.currentDomain);var r=new Error(n);return r.name=e.data.error,Promise.reject(r)}return e},g)}return Promise.reject(null)}t.refreshToken=b;function E(){return d(t.currentDomain,null),t.emit("logout"),o?e.xr.get(o,{},{skipAuthorization:!0,withCredentials:a}).then(function(e){return e}):Promise.resolve(null)}t.logout=E;function _(r,o){if(n){var u;t.currentClientID&&(u=t.currentClientID+":",i&&(u+=i),u="Basic "+btoa(u));var l=void 0;return s.length&&(l=s.join(" ")),e.xr.post(n,{grant_type:"password",username:r,password:o,scope:l},{skipAuthorization:!0,dump:e.xr.formatters.urlEncoded,headers:{Authorization:u},withCredentials:a}).then(function(e){if(e.data.access_token)d(t.currentDomain,e.data.access_token,e.data.refresh_token||null,(e.data.token_type||"").toLowerCase());else if(e.data.error){var n=f[e.data.error]||e.data.error_message||e.data.error,r=new Error(n);return r.name=e.data.error,Promise.reject(r)}return t.emit("login",e.data),e},g)}return Promise.reject(null)}t.login=_;function w(){var n=l(t.currentDomain);if(!n||!n.token)return!1;try{return!e.auth.jwt.isTokenExpired(n.token)}catch(r){console.error(r)}return!1}t.loggedIn=w,t.on=e.EventDispatcher.prototype.on,t.emit=e.EventDispatcher.prototype.emit,t.off=e.EventDispatcher.prototype.off,e.EventDispatcher.apply(t)}(t=e.oauth2||(e.oauth2={}))}(mz||(mz={}));var mz;!function(mz){function require(e,t){var n="function"==typeof t;if("object"==typeof e&&e instanceof Array&&t){var r=e.length,o=[],i=e;for(var a in i)!function(e,n){mz.require(n,function(n){o[e]=n,0==--r&&t.apply(this,o)})}(a,i[a])}else{var s=e.toString();if("exports"==s){if(!n)return console.error("require('exports') en lugar ilegal. sólo se puede utilizar en una llamada a define(['exports'], function(exports).."),{};t({})}else if("require"==s){if(!n)return mz.require;t(mz.require)}else if(s in mz.modules){if(n)mz.modules[s].loaded?t(mz.modules[s].exports):mz.modules[s].callbacks.push({cb:t,reqs:i});else if(mz.modules[s].loaded)return mz.modules[s].exports}else{mz.require.route(s).then(function(e){if(e||(e=/\.js$/.test(s)?s:s+".js"),e.endsWith(".ts")&&(e=e.replace(/\.ts$/,".js")),e&&mz.include(e,s,n),n)return mz.modules[s]?(mz.modules[s].loaded?t(mz.modules[s].exports):mz.modules[s].callbacks.push({cb:t,reqs:s}),mz.modules[s]):null;if(!mz.modules[s])throw"Módulo desconocido [["+s+"]]";return mz.modules[s].loaded?mz.modules[s].exports:void 0})}}}mz.require=require;var modulosCargados={};function include(e,t,n){var r=mz.getPath(e),o=r.split("/");o.pop();var i=mz.modules[t]=new mz.Module(t);if(i.async=!!n,i.filename=r.toString(),i.path=o.join("/")+"/",modulosCargados[e]=loadModule(r,i),0==n&&0==modulosCargados[e])throw"Include: No se pudo cargar el módulo [["+t+"]] en "+e;return!0}mz.include=include;function loadModule(url,module,async){var successflag=!1;if(mz.scriptBase){var baseURL=mz.xr.getAbsoluteUrl(mz.scriptBase.toLowerCase()).toLowerCase();url=mz.xr.getAbsoluteUrl(url),url.toLowerCase().startsWith(baseURL)&&(url=url.toLowerCase().replace(baseURL,""))}var processResponse=function(result){var bkCM=mz.define.currentModule||null;mz.define.currentModule=module;var bkRequire=mz.globalContext.require,bkExports=mz.globalContext.exports,bkModulo=mz.globalContext.module,bkDefine=mz.globalContext.define;try{mz.globalContext.define=module.define.bind(module),mz.globalContext.exports=module.exports,mz.globalContext.require=module.require.bind(module),mz.globalContext.module=module,mz.globalContext.define.amd=bkDefine.amd,function(str){return eval(str)}.call(module.exports,result+"\n//@ sourceURL="+url)}finally{mz.globalContext.define=bkDefine,mz.globalContext.exports=bkExports,mz.globalContext.require=bkRequire,mz.globalContext.module=bkModulo}mz.define.currentModule&&(mz.define.currentModule.loaded=!0,0==mz.define.currentModule.defined&&mz.define.currentModule.ModuleExports.set(mz.define.currentModule.exports,[])),mz.define.currentModule=bkCM,successflag=!0};return mz.hardCodedFiles&&url in mz.hardCodedFiles?processResponse(mz.hardCodedFiles[url]):jQuery.ajax({async:module.async,type:"GET",url:url,data:null,success:function(e){processResponse(e)},fail:function(){console.error("Include: No se pudo cargar el módulo [["+(module.id||url)+"]] en "+url)},dataType:"text"}),successflag}}(mz||(mz={}));var mz;!function(e){var t;!function(t){var n=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};t.routes=[];function r(e,r){if(1==arguments.length&&"string"==typeof e)for(var o in t.routes){var i=t.routes[o];if("string"==typeof i.source&&i.source==e)return Promise.resolve(i.destination);if("function"==typeof t.routes[o].destination)return t.routes[o].destination(e);if(i.source.test(e))return Promise.resolve(e.replace(t.routes[o].source,t.routes[o].destination))}else if(2==arguments.length){var a=-1,s=e.toString();for(var o in t.routes)if(t.routes[o].key==s){a=o;break}var u={key:s,source:e instanceof RegExp?e:new RegExp("^"+n(e).replace(/\\\*/g,"([\\w-]+)")+"$"),destination:r};-1==a?t.routes.push(u):t.routes[a]=u}return Promise.resolve(null)}t.route=r,r("http://*","http://$1"),r("https://*","https://$1"),r("/*.js","/$1.js");function o(t){for(var n in t)e.hardCodedFiles[n.toLowerCase()]=t[n]}t.defineFiles=o}(t=e.require||(e.require={}))}(mz||(mz={})),mz.require.route("jquery","@mz/jquery.js"),window.require=mz.require;var mz;!function(e){var t=/require\(\w*(('|")([^\)\2]+)\2)\w*\)/g;e.modules={};var n=function(){function t(t){this.exports=null,this.loaded=!1,this.parent=null,this.children=[],this.filename=null,this.path=null,this.defined=!1,this.async=!1,this.callbacks=[],this.dependencias={},this.id=t||null,this.define.amd=e.define.amd||{},this.ModuleExports=new r(this)}return t.prototype.getPath=function(t){return e.getPath(t,this.path)},t.prototype.require=function(t,n){if(t instanceof Array){var r=[];for(var o in t){var i=r[o];r[o]=this.getPath(t[o]),i!=r[o]&&r[o].startsWith("http")&&!r[o].endsWith(".js")&&(r[o]+=".js")}return e.require(r,n)}return e.require(this.getPath(t),n)},t.prototype.define=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=e.define.apply(null,arguments);return e.define.lastModule.parent=this,this.children.push(e.define.lastModule),r},t}();e.Module=n;var r=function(){function n(e){this.module=e,this.module.exports={},this.seteado=!1}return n.prototype.set=function(n,r){if(e._debug&&"function"==typeof n&&t.test(n)){var o=this,i=null,a=null;if(String(n).replace(t,function(t,n,r,s){s in o.module.dependencias||(s in e.modules?(a=a||{},a[s]=(a[s]||0)+1):(i=i||{},i[s]=(i[s]||0)+1))}),i){console.group(this.module.id+" - Dependencias sincrónicas NO definidas NI cargadas");for(var s in i)s in e.modules||console.error(s,i[s]);console.groupEnd()}}var u;if("function"==typeof n){
var l=e.globalContext.require,c=e.globalContext.exports,d=e.globalContext.module,p=e.globalContext.define;try{e.globalContext.define=this.module.define.bind(this.module),e.globalContext.exports=this.module.exports,e.globalContext.require=this.module.require.bind(this.module),e.globalContext.module=this.module,e.globalContext.define.amd=p.amd,u=n.apply(this.module.exports,r)}finally{e.globalContext.define=p,e.globalContext.exports=c,e.globalContext.require=l,e.globalContext.module=d}}else u=n;this.seteado=!0,u!==this.module.exports&&isDef(u)&&"string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u&&(this.module.exports=e.copy(u,this.module.exports)),this.module.defined=!0,this.module.loaded=!0;for(var h=null;this.module.callbacks.length&&(h=this.module.callbacks.shift());)h.cb&&h.cb(this.module.exports)},n}();e.ModuleExports=r}(mz||(mz={}));var mz;!function(e){function t(t){t in e.modules&&(e.modules[t]=null,delete e.modules[t])}e.undefine=t;function n(){var t=e.buscarArgumentoTipo("string",arguments)||(e.define.currentModule?e.define.currentModule.id:null)||null,n=e.buscarArgumentoTipo("function",arguments)||null,r=e.buscarArgumentoTipo(Array,arguments)||null,o=!n&&arguments.length&&"object"==typeof arguments[arguments.length-1]&&arguments[arguments.length-1]||null;!n&&o&&(n=o);var i=null;if(e.define.currentModule&&e.define.currentModule.id==t?(i=e.define.currentModule,e.define.currentModule=null):(i=new e.Module(t),o&&(i.exports=o)),e.define.lastModule=i,null!==t){if(t in e.modules&&e.modules[t]!==i)throw e._debug,"Ya está definido "+t;if(e.modules[t]=i,r&&r.length){var a=[];if(i.async)i.require(r,function(e){for(var t in r)"exports"==r[t]?arguments[t]=i.exports:"require"==r[t]&&(arguments[t]=i.require);i.ModuleExports.set(n,arguments)});else{for(var s in r)"exports"==r[s]?i.dependencias[r[s]]=a[s]=i.exports:"require"==r[s]?i.dependencias[r[s]]=a[s]=i.require:i.dependencias[r[s]]=a[s]=i.require(r[s]);i.ModuleExports.set(n,a)}}else i.ModuleExports.set(n,[])}else i.ModuleExports.set(n,[]);return i.exports}e.define=n,n.amd={}}(mz||(mz={}));var mz;!function(e){var t;!function(e){}(t=e.define||(e.define={}))}(mz||(mz={})),mz.globalContext.define=mz.define,mz.define("jquery",function(){return jQuery}),mz.require.route("backbone","@mz/backbone-min.js"),mz.require.route("underscore","@mz/underscore-min.js"),mz.globalContext.Backbone&&mz.define("backbone",function(){return mz.globalContext.Backbone}),mz.globalContext._&&mz.define("underscore",function(){return mz.globalContext._});var mz;!function(e){var t=function(t){__extends(r,t);function r(e,n){t.call(this),this.opciones={},this.__indice__={},this.agregandoLote=!1,this.insert=this.push,this.opciones=n||{},this.array=this.opciones.initialSize?new Array(this.opciones.initialSize):new Array,e&&this.addRange(e)}return r.prototype.first=function(){return this.array[0]},r.prototype.last=function(){return this.array.length?this.array[this.array.length-1]:void 0},r.prototype.clear=function(e){this.trigger(r.EVENTS.BeforeClearCollection,!!e),this.array.length=0,this.__indice__={},this.trigger(r.EVENTS.AfterClearCollection,!!e),!e&&this.emit(r.EVENTS.Changed,"clear",!!e)},Object.defineProperty(r.prototype,"length",{get:function(){return this.array.length},set:function(e){if(isNaN(e)||0>e)throw new TypeError;this.setLength(e)},enumerable:!0,configurable:!0}),r.prototype.getLength=function(){return this.array.length},r.prototype.setLength=function(e){if(0>e)throw"Tamanio invalido";if(this.getLength()>e)for(;this.getLength()>e;)this.pop();else this.array.length=e;return this.emit(r.EVENTS.Changed,"length",this.array.length),this},r.prototype.map=function(e,t){for(var t=arguments[1]||this,n=new r,o=0;o<this.array.length;o++)o in this.array&&n.push(e.call(t,this.array[o]));return n},r.prototype.forEach=function(e,t){var t=arguments[1]||this;if("forEach"in this.array)this.array.forEach(e,t);else for(var n=0;n<this.array.length;n++)n in this.array&&"undefined"!=typeof this.array[n]&&e.call(t,this.array[n],n)},r.prototype.asyncForEach=function(t,n){if(this.array.length){var r=this.array.concat(),o=this,i=0>=n?setImmediate:setTimeout;0>=n&&(n=32),n=Math.abs(n||32);var a=0;function s(){i(function(){for(var i=e.now();e.now()-i<n&&r.length;)t.call(o,r.shift(),a),a++;r.length&&s()},n)}s()}},r.prototype._indizar=function(e,t){if(this.opciones.key){if(!(this.opciones.key in e))throw"No tiene la clave primaria";"undefined"!=typeof e[this.opciones.key]&&(this.__indice__[e[this.opciones.key]]=t)}},r.prototype._deindizar=function(e){this.opciones.key&&"undefined"!=typeof e[this.opciones.key]&&e[this.opciones.key]in this.__indice__&&delete this.__indice__[e[this.opciones.key]]},r.prototype._reindizar=function(){if(this.opciones.key){this.__indice__={};var e=this;this.forEach(function(t,n){t&&"undefined"!=typeof t[e.opciones.key]&&(e.__indice__[t[e.opciones.key]]=n)})}},r.prototype.getAt=function(e){return this.array[e]},r.prototype.reduce=function(e,t){return this.array.reduce(e,t)},r.prototype.groupBy=function(e){var t;if("function"!=typeof e)throw new TypeError;if(t=e,!t)return{};var n={};return this.forEach(function(e){var o=t(e);o&&(o in n?n[o].push(e):n[o]=new r([e],this.opciones))}),n},Object.defineProperty(r.prototype,"key",{get:function(){return this.opciones&&this.opciones.key},enumerable:!0,configurable:!0}),r.prototype.insertAt=function(e,t){if(this.opciones.key){if(!(this.opciones.key in t))return void console.error("El elemento insertado no tiene el campo "+this.opciones.key);if(t[this.opciones.key]in this.__indice__)return void console.error("El elemento insertado ya existe en la coleccion "+this.opciones.key+"="+t[this.opciones.key])}if(e==this.array.length)this.array.push(t),this._indizar(t,e);else{var n=this.array.splice(e);this.array.push(t),this.array=this.array.concat(n),this._reindizar(),this.emit(r.EVENTS.CollectionSorted),this.emit(r.EVENTS.Changed,r.EVENTS.CollectionSorted)}this.emit(r.EVENTS.ElementInserted,e,t),this.emit(r.EVENTS.Changed,r.EVENTS.ElementInserted,e,t)},r.prototype.removeAt=function(e){var t=this.array[e];return this.array.splice(e,1),this._reindizar(),this.emit(r.EVENTS.ElementRemoved,e,t),this.emit(r.EVENTS.Changed,r.EVENTS.ElementRemoved,e,t),t},r.prototype.setAt=function(e,t){var n=this.array[e];this._deindizar(n),this.array[e]=t,this._indizar(t,e),this.emit(r.EVENTS.ElementChanged,e,t,n),this.emit(r.EVENTS.Changed,r.EVENTS.ElementChanged,e,t,n)},r.prototype.push=function(e,t){var n=-1;if(this.opciones.key){if(!(this.opciones.key in e))return console.error("El elemento insertado no tiene el campo "+this.opciones.key),n;if(e[this.opciones.key]in this.__indice__)return console.error("El elemento insertado ya existe en la coleccion "+this.opciones.key+"="+e[this.opciones.key]),n}n=this.array.push(e)-1;try{this._indizar(e,n)}catch(o){return this.array.pop(),console.error("El elemento insertado no tiene el campo "+this.opciones.key),-1}return t||(this.emit(r.EVENTS.ElementInserted,n,e),this.emit(r.EVENTS.Changed,r.EVENTS.ElementInserted,n,e)),n},r.prototype.pop=function(e){if(this.array.length>0){var t=this.array.pop();return this._deindizar(t),e||(this.emit(r.EVENTS.ElementRemoved,this.array.length,t),this.emit(r.EVENTS.Changed,r.EVENTS.ElementRemoved,this.array.length,t)),t}return null},r.prototype.addRange=function(e,t,n){if(!e)return this;var o=this.array.length-1;if(this.agregandoLote=!0,"[object array]"===Object.prototype.toString.call(e).toLowerCase()||e instanceof r)if("forEach"in e&&"function"==typeof e.forEach){var i=this;e.forEach(function(e){i.push(e,t)})}else for(var a=0;a<e.length;a++)this.push(e[a],t);else for(var s in e)this.push(e[s],t);return n||(this.emit(r.EVENTS.ElementRangeInserted,o,this.array.length-1,!t),this.emit(r.EVENTS.Changed,r.EVENTS.ElementRangeInserted,o,this.array.length-1,!t)),this.agregandoLote=!1,this},r.prototype.update=function(e){var t=-1;return this.opciones.key&&this.opciones.key in e&&e[this.opciones.key]in this.__indice__&&this.array[t=this.__indice__[e[this.opciones.key]]]===e?this.updateIndex(t):this.updateIndex(this.indexOf(e))},r.prototype.updateByKey=function(e){return this.opciones.key&&e in this.__indice__?this.updateIndex(this.__indice__[e]):void 0},r.prototype.updateIndex=function(e){if(-1!=e){var t=this.getAt(e);this.emit(r.EVENTS.ElementChanged,e,t,t),this.emit(r.EVENTS.Changed,r.EVENTS.ElementChanged,e,t,t)}return this},r.prototype.join=function(e){return this.array.join(e)},r.prototype.sum=function(e){var t=[],n=e.groupBy||null,r=function(t){var r=null,o=0;return t.forEach(function(t){if(r){for(var i in t)n==i||"number"!=typeof t[i]||"number"!=typeof r[i]&&"undefined"!=typeof r[i]||e&&(e.filtroCampos&&-1==e.filtroCampos.indexOf(i)||e.exclude&&-1!=e.exclude.indexOf(i))||(r[i]=(r[i]||0)+t[i]);r["[[cantidad]]"]++}else{r={},Object.defineProperty(r,"[[cantidad]]",{enumerable:!1,get:function(){return o},set:function(e){o=e}}),n&&(r[n]=t[n]);for(var i in t)n==i||"number"!=typeof t[i]||e&&(e.filtroCampos&&-1==e.filtroCampos.indexOf(i)||e.exclude&&-1!=e.exclude.indexOf(i))||(r[i]=t[i]);r["[[cantidad]]"]=1}}),r};if(null==n)return r(this);var o=this.groupBy(n);for(var i in o)t.push(r(o[i]));return t},r.prototype.orderBy=function(t){var n=t?e.data.order.build(t):void 0;return this.array.sort(n),this._reindizar(),this.emit(r.EVENTS.CollectionSorted,t,"ASC"),this.emit(r.EVENTS.Changed,r.EVENTS.CollectionSorted,t),this},r.prototype.orderByDesc=function(t){var n=t?e.data.order.build(t):null;return n?this.array.sort(function(e,t){return-n(e,t)}):(this.array.sort(),this.array.reverse()),this._reindizar(),this.emit(r.EVENTS.CollectionSorted,t,"DESC"),this.emit(r.EVENTS.Changed,r.EVENTS.CollectionSorted,t),this},r.prototype.some=function(e){if("some"in this.array)return this.array.some(e);for(var t=0;t<this.array.length;t++)if(t in this&&e.call(arguments[1],this[t],t,this))return!0;return!1},r.prototype.where=function(e,t){if("string"==typeof e){for(var n=new r,o=0;o<this.array.length;o++)o in this.array&&this.array[o][e]==arguments[1]&&n.push(this.array[o]);return n}if(this.array.filter)return new r(this.array.filter(e));for(var n=new r,o=0;o<this.array.length;o++)o in this.array&&e(this.array[o])&&n.push(this.array[o]);return n},r.prototype.removeByKey=function(e){var t=this.indexedGetIndex(e);return-1!=t?this.removeAt(t):void 0},r.prototype.remove=function(e){var t=e,n=typeof t;if(1==arguments.length){var o=-1;if(this.opciones.key&&this.opciones.key in t&&(o=this.indexedGetIndex(t[this.opciones.key]),-1!==o&&t!==this.getAt(o)&&(o=-1)),-1==o&&(o=this.lastIndexOf(t)),-1!=o)return[this.removeAt(o)];if("object"==n||"number"==n||"boolean"==n)return null}if("function"===n){for(var i=[],a=0;a<this.array.length;a++)a in this.array&&e(this.array[a])&&i.push({i:a,e:this.array[a]});var s=this,u=[];return i.length&&(i.forEach(function(e){s.remove(e.e),u.push(e.e)}),this.emit(r.EVENTS.ElementRangeRemoved,u),this.emit(r.EVENTS.Changed,r.EVENTS.ElementRangeRemoved,u)),u}},r.prototype.single=function(e,t){if(2==arguments.length&&"string"==typeof e){if(this.opciones.key&&e===this.opciones.key&&arguments[1]in this.__indice__){var n=this.array[this.__indice__[arguments[1]]];if(n&&n[e]==arguments[1])return n}for(var r=0;r<this.array.length;r++)if(this.array[r]&&this.array[r][e]==arguments[1])return this.array[r]}else for(var r=0;r<this.array.length;r++)if(this.array[r]&&e(this.array[r]))return this.array[r];return null},r.prototype.contains=function(e){return-1!=this.array.indexOf(e)},r.prototype.containsKey=function(e){if(this.opciones.key)return e in this.__indice__;throw"La coleccion no tiene key"},r.prototype.indexOf=function(e){return this.array.indexOf(e)},r.prototype.lastIndexOf=function(e){return this.array.lastIndexOf(e)},r.prototype.toArray=function(){for(var e=[],t=0;t<this.array.length;t++)t in this.array&&e.push(this.array[t]);return e},r.prototype.clone=function(){for(var t=new r(null,e.copy(this.opciones)),n=0;n<this.array.length;n++)n in this.array&&t.push(this.array[n]);return t},r.prototype.indexedGet=function(e){return this.opciones.key&&e in this.__indice__?this.array[this.__indice__[e]]:null},r.prototype.indexedGetIndex=function(e){return this.opciones.key&&e in this.__indice__?this.__indice__[e]:-1},r.prototype.mergeElem=function(t){if(this.opciones.key){if(!(this.opciones.key in t))throw new Error("El elemento no contiene la clave primaria");var n=this.indexedGetIndex(t[this.opciones.key]);return-1!=n?(e.copy(this.array[n],t),this.updateIndex(n),this.array[n]):(this.push(t),t)}},r.prototype.max=function(e){var t=[],n=e.groupBy||null,r=function(t){var r=null;return t.forEach(function(t){if(r)for(var o in t)n==o||"number"!=typeof t[o]||"number"!=typeof r[o]&&"undefined"!=typeof r[o]||e&&(e.filtroCampos&&-1==e.filtroCampos.indexOf(o)||e.exclude&&-1!=e.exclude.indexOf(o))||null==t[o]||o in r&&!(r[o]<t[o])||(r[o]=t[o]);else{r={},n&&(r[n]=t[n]);for(var o in t)n==o||"number"!=typeof t[o]||e&&(e.filtroCampos&&-1==e.filtroCampos.indexOf(o)||e.exclude&&-1!=e.exclude.indexOf(o))||(r[o]=t[o])}}),r};if(null==n)return r(this);var o=this.groupBy(n);for(var i in o)t.push(r(o[i]));return t},r.prototype.min=function(e){var t=[],n=e.groupBy||null,r=function(t){var r=null;return t.forEach(function(t){if(r)for(var o in t)n==o||"number"!=typeof t[o]||"number"!=typeof r[o]&&"undefined"!=typeof r[o]||e&&(e.filtroCampos&&-1==e.filtroCampos.indexOf(o)||e.exclude&&-1!=e.exclude.indexOf(o))||null==t[o]||o in r&&!(r[o]>t[o])||(r[o]=t[o]);else{r={},n&&(r[n]=t[n]);for(var o in t)n==o||"number"!=typeof t[o]||e&&(e.filtroCampos&&-1==e.filtroCampos.indexOf(o)||e.exclude&&-1!=e.exclude.indexOf(o))||(r[o]=t[o])}}),r};if(null==n)return r(this);var o=this.groupBy(n);for(var i in o)t.push(r(o[i]));return t},r.prototype.avg=function(e){var t=this.sum(e);for(var n in t)for(var r in t[n])"[[cantidad]]"!=r&&r!=e.groupBy&&(t[n][r]/=t[n]["[[cantidad]]"]);return t},r.prototype.take=function(e,t){void 0===t&&(t=0);var n=[];return this.takeInto(n,e,t),n},r.prototype.takeInto=function(t,n,r){void 0===r&&(r=0);var o=Math.min(this.array.length+n,this.array.length);r=e.intval(r);for(var i=r;o>i;i++)t.push(this.array[i]);return this},r.prototype.swapItems=function(e,t){var n=this.array[t];return this.array[t]=this.array[e],this.array[e]=n,this._reindizar(),this.emit(r.EVENTS.Changed,r.EVENTS.CollectionSorted),this.emit(r.EVENTS.Changed,"swap",e,t),this},r.prototype.count=function(e){var t;"function"==typeof e&&(t=e);var n=[];if(t){var r={};this.forEach(function(e){var n=t(e);if(!(n in r)){var o={Count:0};o["[[cantidad]]"]=0,r[n]=o}r[n]["[[cantidad]]"]++});for(var o in r)r[o].Count=r[o]["[[cantidad]]"],r[o][e.toString()]=o,n.push(r[o])}else{var i={Count:0};i["[[cantidad]]"]=this.array.length,i.Count=i["[[cantidad]]"],n.push(i)}return n},r.prototype.reverse=function(){this.array.reverse(),this.emit(r.EVENTS.CollectionSorted),this.emit(r.EVENTS.Changed,r.EVENTS.CollectionSorted)},r.prototype.mergeArray=function(t,n){var r=this,o={added:[],removed:[]};if(this.opciones.key){var i={};for(var a in t){var s=t[a];if(!(this.opciones.key in s))throw new TypeError("El elemento no contiene la clave primaria");var u=this.indexedGetIndex(s[this.opciones.key]);i[s[this.opciones.key]]=!0,-1!=u?(e.copy(this.array[u],s),this.updateIndex(u)):(this.push(s),o.added.push(s))}n&&(o.removed=this.remove(function(e){return!(e[r.opciones.key]in i)}))}else console.error("You cannot mergeArray if the collection does not have 'key'");return o},r.prototype.createView=function(){return new n(this,e.copy(this.opciones))},r.prototype.getPrivateArray=function(){return this.array},r.EVENTS=e.copy({BeforeClearCollection:"pre_clear",AfterClearCollection:"clear",Changed:"changed",ElementInserted:"insert_at",ElementChanged:"set_at",ElementRemoved:"remove_at",ElementRangeInserted:"addRange",CollectionSorted:"sorted",ElementRangeRemoved:"removed"},e.MVCObject.EVENTS),__decorate([e.MVCObject.proxy,__metadata("design:type",Boolean)],r.prototype,"agregandoLote",void 0),r}(e.MVCObject);e.Collection=t;var n=function(n){__extends(r,n);function r(e,t){var r=this;n.call(this,null,t),this.set("filter",null),this.set("order",null),this.on("filter_changed",function(e,t){r._handleChanged("filter",e,t)}),this.on("order_changed",function(e,t){r._handleChanged("order",e,t)}),this.attachTo(e)}return r.prototype._handleChanged=function(e,n,r){var o="order"==e||e==t.EVENTS.CollectionSorted||"insert_at"==e||"set_at"==e||"addRange"==e;"clear"==e&&(this.clear(),o=!1),("addRange"==e||"filter"==e)&&(this._remake(),o=!0),o&&this.resort()},r.prototype._remake=function(e){if(this.clear(e),this.get("parent")){var t=this.get("parent").getPrivateArray(),n=this.get("filter");if(n)for(var r in t)n.call(this,t[r])&&this.push(t[r],e);else for(var r in t)this.push(t[r],e)}this.resort()},r.prototype.resort=function(){var n=this.get("order");if(n){var r=[];for(var o in this.array)r[o]=this.array[o];var i=n.q?e.data.order.build(n.q):null;i?n.desc?this.array.sort(function(e,t){return-i(e,t)}):this.array.sort(i):(this.array.sort(),n.desc&&this.array.reverse());for(var o in this.array)if(this.array[o]!==r[o]){this._reindizar(),this.emit(t.EVENTS.CollectionSorted,n.q,n.desc?"DESC":"ASC"),this.emit(t.EVENTS.Changed,t.EVENTS.CollectionSorted,n.q);break}}},r.prototype.refresh=function(){this._remake()},r.prototype.filter=function(e){return this.set("filter",e),this},r.prototype.orderBy=function(e){return this.set("order",{q:e,desc:!1}),this},r.prototype.orderByDesc=function(e){return this.set("order",{q:e,desc:!0}),this},r.prototype.attachTo=function(e){if(this.detach(),this.set("bindeosParent",[]),this.set("parent",e),e){var n=this;this.get("bindeosParent").push(e.on(t.EVENTS.AfterClearCollection,function(){n.clear()})),this.get("bindeosParent").push(e.on(t.EVENTS.BeforeClearCollection,function(e){n.trigger(r.EVENTS.BeforeClearCollection,e)})),this.get("bindeosParent").push(e.on("changed",function(r,o,i){if(r!=t.EVENTS.ElementInserted&&r!=t.EVENTS.ElementChanged||!e.agregandoLote){var a=n.get("filter");if(r==t.EVENTS.ElementInserted||r==t.EVENTS.ElementChanged||r==t.EVENTS.ElementRemoved){var s=n.indexOf(i);if(!a||a(i))switch(r){case t.EVENTS.ElementInserted:return void(-1==s&&(n.push(i),n.resort()));case t.EVENTS.ElementChanged:return-1!=s?n.updateIndex(s):n.push(i),void n.resort();case t.EVENTS.ElementRemoved:if(-1!=s)return void n.removeAt(s)}else if(-1!=s)return void n.removeAt(s)}return"refresh"==r?void n._remake():void n._handleChanged.apply(n,arguments)}})),this._remake()}},r.prototype.detach=function(){if(this.get("bindeosParent")&&this.get("parent")){this.clear();var e=this.get("bindeosParent");for(var t in e)e[t].off();e.length=0,this.set("bindeosParent",null),this.set("parent",null)}},r}(t);e.CollectionView=n}(mz||(mz={}));var mz;!function(e){var t;!function(t){function n(n){t.adapter||(e.scriptBase=n.getBaseHref()||"",t.adapter=n)}t.setRootDomAdapter=n}(t=e.dom||(e.dom={}))}(mz||(mz={}));var mz;!function(e){var t;!function(e){var t=function(){function e(){}return e}();e.AbstractDomAdapter=t}(t=e.dom||(e.dom={}))}(mz||(mz={}));var mz;!function(e){var t;!function(t){var n={"class":"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},r=3,o={"\b":"Backspace","	":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},i={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"},a=function(e){__extends(t,e);function t(){e.call(this),this._animationPrefix=null,this._transitionEnd=null;try{var t=this.createElement("div",this.defaultDoc());if(this.getStyle(t,"animationName"))this._animationPrefix="";else for(var n=["Webkit","Moz","O","ms"],r=0;r<n.length;r++)if(this.getStyle(t,n[r]+"AnimationName")){this._animationPrefix="-"+n[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in o)this.getStyle(t,i)&&(this._transitionEnd=o[i])}catch(a){this._animationPrefix=null,this._transitionEnd=null}}return t.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},t.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},t.prototype.supportsDOMEvents=function(){return!0},t.prototype.supportsNativeShadowDOM=function(){return"function"==typeof this.defaultDoc().body.createShadowRoot},t.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},t.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},t.prototype.supportsAnimation=function(){return!!this._animationPrefix&&!!this._transitionEnd},t.prototype.getXHR=function(){return new XMLHttpRequest},t}(t.AbstractDomAdapter);t.GenericBrowserDomAdapter=a;var s=function(a){__extends(s,a);function s(){a.apply(this,arguments)}return s.prototype.parse=function(e){throw new Error("parse not implemented")},s.makeCurrent=function(){t.setRootDomAdapter(new s)},s.prototype.hasProperty=function(e,t){return t in e},s.prototype.setProperty=function(e,t,n){e[t]=n},s.prototype.getProperty=function(e,t){return e[t]},s.prototype.invoke=function(e,t,n){e[t].apply(e,n)},s.prototype.logError=function(e){console.error?console.error(e):console.log(e)},s.prototype.log=function(e){console.log(e)},s.prototype.logGroup=function(e){console.group?(console.group(e),this.logError(e)):console.log(e)},s.prototype.logGroupEnd=function(){console.groupEnd&&console.groupEnd()},Object.defineProperty(s.prototype,"attrToPropMap",{get:function(){return n},enumerable:!0,configurable:!0}),s.prototype.query=function(e){return document.querySelector(e)},s.prototype.querySelector=function(e,t){return e.querySelector(t)},s.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},s.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},s.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},s.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},s.prototype.createMouseEvent=function(e){var t=document.createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},s.prototype.createEvent=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t},s.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},s.prototype.isPrevented=function(e){return e.defaultPrevented||!!e.returnValue&&!e.returnValue},s.prototype.getInnerHTML=function(e){return e.innerHTML},s.prototype.getOuterHTML=function(e){return e.outerHTML},s.prototype.nodeName=function(e){return e.nodeName},s.prototype.nodeValue=function(e){return e.nodeValue},s.prototype.type=function(e){return e.type},s.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},s.prototype.firstChild=function(e){return e.firstChild},s.prototype.nextSibling=function(e){return e.nextSibling},s.prototype.parentElement=function(e){return e.parentNode},s.prototype.childNodes=function(e){return e.childNodes},s.prototype.childNodesAsList=function(e){var t=e.childNodes,n=[];n.length=t.length;for(var r=0;r<t.length;r++)n[r]=t[r];return n},s.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},s.prototype.appendChild=function(e,t){e.appendChild(t)},s.prototype.removeChild=function(e,t){e.removeChild(t)},s.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},s.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},s.prototype.insertBefore=function(e,t){e.parentNode.insertBefore(t,e)},s.prototype.insertAllBefore=function(e,t){t.forEach(function(t){return e.parentNode.insertBefore(t,e)})},s.prototype.insertAfter=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},s.prototype.setInnerHTML=function(e,t){e.innerHTML=t},s.prototype.getText=function(e){return e.textContent},s.prototype.setText=function(e,t){e.textContent=t},s.prototype.getValue=function(e){return e.value},s.prototype.setValue=function(e,t){e.value=t},s.prototype.getChecked=function(e){return e.checked},s.prototype.setChecked=function(e,t){e.checked=t},s.prototype.createComment=function(e){return document.createComment(e)},s.prototype.createTemplate=function(e){var t=document.createElement("template");return t.innerHTML=e,t},s.prototype.createElement=function(e,t){return void 0===t&&(t=document),t.createElement(e)},s.prototype.createElementNS=function(e,t,n){return void 0===n&&(n=document),n.createElementNS(e,t)},s.prototype.createTextNode=function(e,t){return void 0===t&&(t=document),t.createTextNode(e)},s.prototype.createScriptTag=function(e,t,n){void 0===n&&(n=document);var r=n.createElement("SCRIPT");return r.setAttribute(e,t),r},s.prototype.createStyleElement=function(e,t){void 0===t&&(t=document);var n=t.createElement("style");return this.appendChild(n,this.createTextNode(e)),n},s.prototype.createShadowRoot=function(e){return e.createShadowRoot()},s.prototype.getShadowRoot=function(e){return e.shadowRoot},s.prototype.getHost=function(e){return e.host},s.prototype.clone=function(e){return e.cloneNode(!0)},s.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},s.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},s.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},s.prototype.addClass=function(e,t){e.classList.add(t)},s.prototype.removeClass=function(e,t){e.classList.remove(t)},s.prototype.hasClass=function(e,t){return e.classList.contains(t)},s.prototype.setStyle=function(e,t,n){e.style[t]=n},s.prototype.removeStyle=function(e,t){e.style[t]=null},s.prototype.getStyle=function(e,t){return e.style[t]},s.prototype.tagName=function(e){return e.tagName},s.prototype.attributeMap=function(e){for(var t={},n=e.attributes,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.value}return t},s.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},s.prototype.getAttribute=function(e,t){return e.getAttribute(t)},s.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},s.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},s.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},s.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},s.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},s.prototype.defaultDoc=function(){return document},s.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},s.prototype.getTitle=function(){return document.title},s.prototype.setTitle=function(e){document.title=e||""},s.prototype.elementMatches=function(e,t){var n=!1;return e instanceof HTMLElement&&(e.matches?n=e.matches(t):e.msMatchesSelector?n=e.msMatchesSelector(t):e.webkitMatchesSelector&&(n=e.webkitMatchesSelector(t))),n},s.prototype.isTemplateElement=function(e){return e instanceof HTMLElement&&"TEMPLATE"==e.nodeName},s.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},s.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},s.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},s.prototype.hasShadowRoot=function(e){return e instanceof HTMLElement&&e.shadowRoot},s.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},s.prototype.importIntoDoc=function(e){var t=e;return this.isTemplateElement(e)&&(t=this.content(e)),document.importNode(t,!0)},s.prototype.adoptNode=function(e){return document.adoptNode(e)},s.prototype.getHref=function(e){return e.href},s.prototype.getEventKey=function(e){var t=e.key;if(!t){if(t=e.keyIdentifier,!t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===r&&i.hasOwnProperty(t)&&(t=i[t]))}return o.hasOwnProperty(t)&&(t=o[t]),t},s.prototype.getGlobalEventTarget=function(t){return"window"==t?e.globalContext.window:"document"==t?document:"body"==t?document.body:void 0},s.prototype.getHistory=function(){return history},s.prototype.getLocation=function(){return location},s.prototype.getBaseHref=function(){var e=l();return e?d(e):null},s.prototype.resetBaseElement=function(){u=null},s.prototype.getUserAgent=function(){return navigator.userAgent},s.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},s.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},s.prototype.getComputedStyle=function(e){return getComputedStyle(e)},s.prototype.requestAnimationFrame=function(e){return requestAnimationFrame(e)},s.prototype.cancelAnimationFrame=function(e){cancelAnimationFrame(e)},s.prototype.performanceNow=function(){return"undefined"!=typeof performance&&performance.now?performance.now():1e3*(new Date).getTime()},s}(a);t.BrowserDomAdapter=s;var u=null;function l(){return u||(u=document.querySelector("base"))?u.getAttribute("href"):null}var c=null;function d(e){return c||(c=document.createElement("a")),c.setAttribute("href",e),"/"===c.pathname.charAt(0)?c.pathname:"/"+c.pathname}s.makeCurrent()}(t=e.dom||(e.dom={}))}(mz||(mz={}));var Reflect;!function(e){var t=e.metadata;e.MetadataInfo=Symbol("mz.metadata.typings");var n={enumerable:!1,writable:!1,configurable:!1,value:null};function r(n,r){return"design:type"==n?"string"==typeof e.MetadataInfo?function(i,a){var s=i[e.MetadataInfo];s||(s=o(i,e.MetadataInfo,{})),s[a]=r,t&&t(n,r).apply(this,arguments)}:function(o,i){var a=o[e.MetadataInfo]=o[e.MetadataInfo]||{};a[i]=r,t&&t(n,r).apply(this,arguments)}:t&&t(n,r)||void 0}e.metadata=r;function o(e,t,r){return"symbol"==typeof t?e[t]=r:(n.value=r,Object.defineProperty(e,t.toString(),n)),r}e.setObjectSymbol=o}(Reflect||(Reflect={}));var mz;!function(e){e.route={start:function(t,n){var r=function(r){e.route=e.route=new(r.Router.extend(t)),r.history.start(),e.route.start=function(t,n){n&&n(e.route)},console.log("Backbone loaded! Route started!",e.route),n&&n(e.route)};e.globalContext.Backbone&&r(e.globalContext.Backbone)||e.require("backbone",function(e){return r(e)})}}}(mz||(mz={}));var mz;!function(e){var t;!function(t){var n={},r=$('<link rel="stylesheet" type="text/css">');$(function(){r.appendTo("body")});var o=32565*Math.random()|0,i=e.delayer(function(){var e="";for(var t in n){e+=t+" {";for(var o in n[t]){var i=n[t][o];"number"!=typeof i||jQuery.cssNumber[o]||(i+="px"),e+=o+": "+i+";"}e+="}"}r.attr("href","data:text/css;base64,"+btoa(e))},16);function a(t,r){var s=!1,u="";if(isDef(r))u=t,e.copy(n[t]=n[t]||{},r);else{if(e.isIterable(t)){var l=[];for(var c in t){if("object"!=typeof t[c]){s=!0;break}e.copy(n[c]=n[c]||{},t[c]),l.push(c)}u=l.join(" ")}s===!0&&(u=".-mzcss-"+(o++).toString(32),a(u,t))}return i(),-1!=u.indexOf(".")?u.replace(".",""):null}t.set=a;var s=function(){function t(e){var t=this;this.prefix=null,this.elem=$('<link rel="stylesheet" type="text/css">'),this.estilo={},this.remake=null,this.destino="body",e instanceof jQuery&&(this.destino=e,e=":host"),this.prefix=e,$(function(){t.enable()})}return t.prototype.enable=function(){this.elem.appendTo(this.destino)},t.prototype.disable=function(){this.elem.remove()},t.prototype.refresh=function(){if(!this.remake){var t=this;this.remake=e.delayer(function(){var e="";for(var n in t.estilo){e+=(t.prefix?t.prefix+" ":"")+n+" {";for(var r in t.estilo[n]){var o=t.estilo[n][r];"number"!=typeof o||jQuery.cssNumber[r]||(o+="px"),e+=r+": "+o+";"}e+="}"}t.elem.attr("href","data:text/css;base64,"+btoa(e))},9)}this.remake()},t.prototype.set=function(t,n){this.estilo[t]=this.estilo[t]||{},e.copy(this.estilo[t],n),this.refresh()},t}();t.Stylesheet=s}(t=e.css||(e.css={}))}(mz||(mz={}));var MzModelDirective=function(e){__extends(t,e);function t(){e.apply(this,arguments),this.delayedBinding=null}return t.prototype.unmount=function(){this.teardown(),e.prototype.unmount.call(this)},t.prototype.teardown=function(){this.delayedBinding&&this.widget.DOM.off(t.jqueryBindings,this.delayedBinding),
this.componentBinding&&this.componentBinding.off(),this.componentBinding=null,this.delayedBinding=null},t.prototype.changed=function(e,n){var r=this;this.teardown(),this.widget instanceof mz.widgets.MzInput?(this.widgetValueBinding=this.widget.on("value_changed",function(t){t!=r.component[e]&&(r.component[e]=t)}),this.componentBinding=this.component.on(e+"_changed",function(e){var t=r.widget.value;t==e||e&&e.toString()==t||(r.widget.value=e)})):!e||"INPUT"!=this.widget.rootNode.nodeName.toUpperCase()&&"SELECT"!=this.widget.rootNode.nodeName.toUpperCase()||(this.delayedBinding=function(){var t=r.widget.DOM.val();t!=r.component[e]&&(r.component[e]=t)},this.changeBinding=this.widget.DOM.on(t.jqueryBindings,this.delayedBinding),this.componentBinding=this.component.on(e+"_changed",function(e){var t=r.widget.DOM.val();t==e||e&&e.toString()==t||r.widget.DOM.val(e)}))},t.symbol2wb=Symbol("mz-model-binding"),t.jqueryBindings="changed keyup paste lostfocus search",t=__decorate([mz.AttributeDirective.Register("mz-model"),__metadata("design:paramtypes",[])],t)}(mz.AttributeDirective),mz;!function(e){var t;!function(t){var n=function(t){__extends(n,t);function n(){t.apply(this,arguments)}return __decorate([e.MVCObject.proxy,__metadata("design:type",Object)],n.prototype,"value",void 0),n}(e.Widget);t.MzInput=n}(t=e.widgets||(e.widgets={}))}(mz||(mz={}));var MzRawDirective=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.changed=function(e){this.widget.contentNode.innerHTML=e},t=__decorate([mz.AttributeDirective.Register("mz-raw"),__metadata("design:paramtypes",[])],t)}(mz.AttributeDirective),MzClassNameDirective=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.changed=function(e,t){this.widget.rootNode.className!=e&&(this.widget.rootNode.className=e)},t=__decorate([mz.AttributeDirective.Register("class"),__metadata("design:paramtypes",[])],t)}(mz.AttributeDirective),MzVisibleDirective=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.mount=function(){var e=this;this.listener=this.widget.on("class_changed",function(){return e.changed(e.value)})},t.prototype.unmount=function(){this.listener.off(),this.listener=null},t.prototype.changed=function(e){if(CBool(e)){mz.dom.adapter.removeClass(this.widget.rootNode,t.vendorHiddenClass);try{mz.dom.adapter.removeAttribute(this.widget.rootNode,"aria-hidden")}catch(n){}try{mz.dom.adapter.removeAttribute(this.widget.rootNode,mz.HIDDEN_PROP)}catch(n){}this._value=!0}else{mz.dom.adapter.addClass(this.widget.rootNode,t.vendorHiddenClass);try{mz.dom.adapter.setAttribute(this.widget.rootNode,"aria-hidden","true")}catch(n){}try{mz.dom.adapter.setAttribute(this.widget.rootNode,mz.HIDDEN_PROP,mz.HIDDEN_PROP)}catch(n){}this._value=!1}},t.vendorHiddenClass="mz-hidden",t=__decorate([mz.AttributeDirective.Register("visible"),__metadata("design:paramtypes",[])],t)}(mz.AttributeDirective),mz;!function(e){var t;!function(e){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=e.raw,i="";return n.forEach(function(e,n){var r=o[n];Array.isArray(e)&&(e=e.join("")),r.endsWith("$")?r=r.slice(0,-1):e=t.escape(e),i+=r,i+=e}),i+=o[o.length-1]}e.html=t}(t=e.view||(e.view={}))}(mz||(mz={}));var mz;!function(e){var t;!function(e){var t;!function(e){function t(e){return void 0===e||null==e?"":e===!1||e===!1?e?"true":"false":e&&(e=e.toString())&&e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/`/g,"&#96;")}e.escape=t}(t=e.html||(e.html={}))}(t=e.view||(e.view={}))}(mz||(mz={}));var mz;!function(e){var t;!function(t){function n(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=null;if("string"==typeof t){i=e.widgets.BaseElement;var a=t.toLowerCase();a in e.widgets&&(i=e.widgets[a]),n&&n instanceof Array&&!r&&(r=n),n=null}else i=t;return new i(null,n||{},r||[])}t.createElement=n,t.__spread=e.copy}(t=e.vdom||(e.vdom={}))}(mz||(mz={}));var mz;!function(e){function t(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=e.widgets.BaseElement;return t=t.toLowerCase(),t in e.widgets&&(i=e.widgets[t]),n&&n instanceof Array&&!r&&(n=r),new i(null,n||{},r||[])}e.h=t}(mz||(mz={}));var mz;!function(e){var t;!function(t){function n(e){e&&"object"==typeof e&&("unmount"in e?e.unmount():e.DOM&&e.DOM.remove())}function r(e){e&&"refreshScope"in e&&e.refreshScope()}var o=function(t){__extends(o,t);function o(n,r,o,i,a,s){t.call(this,n,r,[],i,a,s),this.collectionKey=Symbol("mz-repeat-"+e.genUID()),this.ponerElem=this.ponerElem.bind(this),this.delegateUnmountElements=this.delegateUnmountElements.bind(this),this.list&&this.list.length&&this.list.forEach(this.ponerElem,this)}return o.prototype.list_changed=function(t,n){var r=this;if(t!==n)return this.listenersLista?(this.listenersLista.forEach(function(e){return e.off()}),this.listenersLista.length=0):t&&(this.listenersLista=[]),n&&(n.forEach(this.delegateUnmountElements),this.detachAllNodes()),!t||t instanceof e.Collection?void(this.list&&(this.listenersLista.push(this.list.on("changed",this.redraw.bind(this))),this.listenersLista.push(this.list.on("pre_clear",function(e){return r.redraw("pre_clear",e)})),this.list.length&&this.collectionKey&&this.redraw("refresh"))):void console.error(new Error("<mz-repeat> expects attr 'list: mz.Collection'"))},o.prototype.unmount=function(){this.list=null,t.prototype.unmount.call(this)},o.prototype.ponerElem=function(e){var t=this;this.item=e;var n=e[this.collectionKey],r=!!n;r||(n=this.generateScopedContent(e),e[this.collectionKey]=n),n.forEach(function(e){r&&e&&"object"==typeof e&&"refreshScope"in e&&e.refreshScope(),t.append(e)})},o.prototype.generateScopedContent=function(e){var n=t.prototype.generateScopedContent.call(this,e);return this.afterAdd&&this.afterAdd(n,e),n},o.prototype.detachAllNodes=function(){for(var e=null;e=this.contentNode.firstChild;)this.contentNode.removeChild(e)},o.prototype.delegateUnmountElements=function(e){e[this.collectionKey]&&(e[this.collectionKey].forEach(n),delete e[this.collectionKey])},o.prototype.redraw=function(t,n,o){var i=!t;if(t==e.Collection.EVENTS.ElementChanged&&this.collectionKey in o){var a=o[this.collectionKey];for(var s in a)r(a[s])}else if(t==e.Collection.EVENTS.ElementInserted||t==e.Collection.EVENTS.ElementChanged)this.ponerElem(o);else if(t==e.Collection.EVENTS.ElementRemoved&&o&&o[this.collectionKey])this.delegateUnmountElements(o);else if(t==e.Collection.EVENTS.CollectionSorted)i=!0;else if("refresh"==t)this.detachAllNodes(),this.list.forEach(r),i=!0;else if(t==e.Collection.EVENTS.BeforeClearCollection)return void this.list.forEach(this.delegateUnmountElements);("clear"==t||i)&&this.detachAllNodes(),i&&this.list.length&&this.list.forEach(this.ponerElem,this)},__decorate([e.MVCObject.proxy,__metadata("design:type",e.Collection)],o.prototype,"list",void 0),__decorate([e.MVCObject.proxy,__metadata("design:type",Function)],o.prototype,"afterAdd",void 0),o=__decorate([e.Widget.RegisterComponent("mz-repeat"),e.Widget.ConfigureEmptyTag,__metadata("design:paramtypes",[HTMLElement,Object,Array,Object,Object,Object])],o)}(e.Widget);t.MzRepeat=o}(t=e.widgets||(e.widgets={}))}(mz||(mz={}));
//# sourceMappingURL=mz.min.js.map
